{:definitions {"quamolit.comp.icon-play/init-instant" ["defn" "init-instant" ["args" "state"] ["let" [["value" ["if" "true" "1" "0"]]] ["{}" ":play-target" "value" ":play-v" "0" ":play-value" "value"]]], "quamolit.alias/create-comp" ["defn" "create-comp" [["comp-name" "render"] ["create-comp" "comp-name" "nil" "nil" "nil" "nil" "nil" "nil" "nil" "render"]] [["comp-name" "init-state" "update-state" "render"] ["create-comp" "comp-name" "init-state" "update-state" "nil" "nil" "nil" "nil" "nil" "render"]] [["comp-name" "init-instant" "on-tick" "on-update" "on-unmount" "remove?" "render"] ["create-comp" "comp-name" "nil" "nil" "init-instant" "on-tick" "on-update" "on-unmount" "remove?" "render"]] [["comp-name" "init-state" "update-state" "init-instant" "on-tick" "on-update" "on-unmount" "remove?" "render"] ["fn" ["&" "args"] ["Component." "comp-name" "nil" "args" "nil" "nil" ["or" "init-state" "default-init-state"] ["or" "update-state" "merge"] ["or" "init-instant" "default-init-instant"] ["or" "on-tick" "default-on-tick"] ["or" "on-update" "default-on-update"] ["or" "on-unmount" "default-on-unmount"] ["or" "remove?" "default-remove?"] "render" "nil" "false"]]]], "quamolit.render.element/render-scale" ["defn" "render-scale" ["props" "&" "children"] ["let" [["style" ["merge" ["{}" ":x" "0" ":y" "0"] [":style" "props"]]]] ["fn" ["state" "mutate!" "instant" "tick"] ["group" ["{}"] ["native-save" ["{}"]] ["native-scale" ["assoc" "props" ":style" "style"]] ["group" ["{}"] ["map-indexed" "vector" "children"]] ["native-restore" ["{}"]]]]]], "quamolit.comp.raining/init-instant" ["defn" "init-instant" [] ["let" [["init-val" ["->>" ["repeat" "80" "0"] ["map-indexed" ["fn" ["index" "x"] ["[]" "index" ["random-point"]]]] ["into" ["[]"]]]]] "init-val"]], "quamolit.render.paint/paint-image" ["defn" "paint-image" ["ctx" "style" "coord"] ["let" [["sx" ["or" [":sx" "style"] "0"]] ["sy" ["or" [":sy" "style"] "0"]] ["sw" ["or" [":sw" "style"] "40"]] ["sh" ["or" [":sh" "style"] "40"]] ["dx" ["or" [":dx" "style"] "0"]] ["dy" ["or" [":dy" "style"] "0"]] ["dw" ["or" [":dw" "style"] "40"]] ["dh" ["or" [":dh" "style"] "40"]] ["image" ["get-image" [":src" "style"]]]] [".drawImage" "ctx" "image" "sx" "sy" "sw" "sh" "dx" "dy" "dw" "dh"]]], "quamolit.comp.digits/render-1" ["defn" "render-1" ["props"] ["fn" ["state" "mutate!" "intant" "tick"] ["translate" "props" ["comp-stroke" "40" "0" "40" "40"] ["comp-stroke" "40" "40" "40" "80"]]]], "quamolit.alias/native-scale" ["defn" "native-scale" ["props" "&" "children"] ["create-shape" ":native-scale" "props" "children"]], "quamolit.comp.todolist/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] "instant"], "quamolit.comp.task/style-block" ["def" "style-block" ["{}" [":w" "300"] [":h" "40"] [":fill-style" ["hsl" "40" "80" "80"]]]], "quamolit.alias/native-rotate" ["defn" "native-rotate" ["props" "&" "children"] ["create-shape" ":native-rotate" "props" "children"]], "quamolit.comp.digits/render-digit" ["defn" "render-digit" ["n" "props"] ["fn" ["state" "mutate!" "instant" "tick"] ["case" "n" ["0" ["comp-0" "props"]] ["1" ["comp-1" "props"]] ["2" ["comp-2" "props"]] ["3" ["comp-3" "props"]] ["4" ["comp-4" "props"]] ["5" ["comp-5" "props"]] ["6" ["comp-6" "props"]] ["7" ["comp-7" "props"]] ["8" ["comp-8" "props"]] ["9" ["comp-9" "props"]] ["comp-0" "props"]]]], "quamolit.comp.code-table/init-state" ["defn" "init-state" [] ["into" ["[]"] ["repeat" "3" ["into" ["[]"] ["repeat" "3" "|edit"]]]]], "quamolit.alias/default-init-instant" ["defn" "default-init-instant" ["args" "state"] ["{}" ":numb?" "false"]], "quamolit.comp.binary-tree/init-state" ["defn" "init-state" [] ["[]" ["js/Math.random"] ["js/Math.random"] ["js/Math.random"] ["js/Math.random"]]], "quamolit.main/render-loop!" ["defn" "render-loop!" ["timestamp"] ["let" [["target" [".querySelector" "js/document" "|#app"]]] ["render-page" ["comp-container" "timestamp" "@store-ref"] "states-ref" "target"] ["reset!" "loop-ref" ["js/requestAnimationFrame" "render-loop!"]]]], "quamolit.render.paint/paint-translate" ["defn" "paint-translate" ["ctx" "style"] ["let" [["x" ["or" [":x" "style"] "0"]] ["y" ["or" [":y" "style"] "0"]]] [".translate" "ctx" "x" "y"]]], "quamolit.updater.core/task-add" ["defn" "task-add" ["store" "op-data" "tick"] ["conj" "store" ["assoc" "schema/task" ":id" "tick" ":text" "op-data"]]], "quamolit.comp.icon-increase/render" ["defn" "render" [] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["n1" [":n" "instant"]]] ["rect" ["{}" ":style" ["{}" [":w" "60"] [":h" "60"] [":fill-style" ["hsl" "0" "0" "90"]]] ":event" ["{}" ":click" ["handle-click" "mutate!"]]] ["translate" ["{}" ":style" ["{}" ":x" "-12"]] ["rotate" ["{}" ":style" ["{}" ":angle" ["*" "90" "n1"]]] ["line" ["{}" ":style" ["{}" [":stroke-style" ["hsl" "0" "80" "30"]] [":x0" "-7"] [":y0" "0"] [":x1" "7"] [":y1" "0"] [":line-width" "2"]]]] ["line" ["{}" ":style" ["{}" [":stroke-style" ["hsl" "0" "80" "30"]] [":x0" "0"] [":y0" "-7"] [":x1" "0"] [":y1" "7"] [":line-width" "2"]]]]]] ["translate" ["{}" ":style" ["{}" [":x" "10"]]] ["into" ["sorted-map"] ["{}" [["+" "state" "1"] ["translate" ["{}" ":style" ["{}" ":y" ["*" "-20" ["-" "state" "n1"]]]] ["alpha" ["{}" ":style" ["{}" ":opacity" ["-" ["+" "1" "n1"] "state"]]] ["text" ["{}" ":style" ["{}" [":text" ["str" ["+" "state" "1"]]] [":fill-style" ["hsl" "0" "80" "30"]] [":font-family" "|Wawati SC Regular"]]]]]]] ["state" ["translate" ["{}" ":style" ["{}" ":y" ["*" "20" ["-" "n1" ["-" "state" "1"]]]]] ["alpha" ["{}" ":style" ["{}" ":opacity" ["-" "state" "n1"]]] ["text" ["{}" ":style" ["{}" [":text" ["str" "state"]] [":fill-style" ["hsl" "0" "80" "30"]] [":font-family" "|Wawati SC Regular"]]]]]]]]]]]]]], "quamolit.render.expand/expand-shape" ["defn" "expand-shape" ["markup" "old-tree" "coord" "c-coord" "states" "build-mutate" "at-place?" "tick" "elapsed"] ["let" [["old-children" ["->>" [":children" "old-tree"] ["into" ["[]"]]]] ["new-children" ["->>" [":children" "markup"] ["filterv" ["fn" ["entry"] ["some?" ["last" "entry"]]]] ["mapv" ["fn" ["child"] ["let" [["child-key" ["first" "child"]] ["child-markup" ["last" "child"]] ["child-coord" ["conj" "coord" "child-key"]] ["old-child-pair" ["->>" "old-children" ["filter-first" ["fn" ["pair"] ["identical?" ["first" "pair"] "child-key"]]]]] ["old-child-tree" ["if" ["some?" "old-child-pair"] ["last" "old-child-pair"] "nil"]] ["child-state" ["get" "states" "child-key"]]] ["[]" "child-key" ["if" ["=" ["type" "child-markup"] "Component"] ["expand-component" "child-markup" "old-child-tree" "child-coord" "child-state" "build-mutate" "at-place?" "tick" "elapsed"] ["expand-shape" "child-markup" "old-child-tree" "child-coord" "coord" "child-state" "build-mutate" "at-place?" "tick" "elapsed"]]]]]]]]] ["if" ["some?" "old-tree"] ["let" [["merged-children" ["merge-children" ["[]"] "old-children" "new-children" "coord" "states" "build-mutate" "at-place?" "tick" "elapsed"]]] ["assoc" "markup" ":coord" "coord" ":c-coord" "c-coord" ":children" "merged-children"]] ["assoc" "markup" ":children" "new-children" ":coord" "coord" ":c-coord" "c-coord"]]]], "quamolit.comp.raining/random-point" ["defn" "random-point" [] ["[]" ["-" ["rand-int" "1400"] "600"] ["-" ["rand-int" "600"] "400"]]], "quamolit.comp.digits/comp-1" ["def" "comp-1" ["create-comp" ":one" "render-1"]], "quamolit.alias/native-restore" ["defn" "native-restore" ["props" "&" "children"] ["create-shape" ":native-restore" "props" "children"]], "quamolit.comp.digits/render-6" ["defn" "render-6" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "40" "0" "0" "0"] ["comp-stroke" "0" "0" "0" "40"] ["comp-stroke" "0" "40" "40" "40"] ["comp-stroke" "40" "40" "40" "80"] ["comp-stroke" "40" "80" "0" "80"] ["comp-stroke" "0" "80" "0" "40"]]]], "quamolit.core/tree-ref" ["defonce" "tree-ref" ["atom" "nil"]], "quamolit.comp.file-card/on-unmount" ["defn" "on-unmount" ["instant" "tick"] ["assoc" "instant" ":presence-v" "-3"]], "quamolit.comp.file-card/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] ["let" [["old-popup?" ["last" "old-args"]] ["popup?" ["last" "args"]]] ["if" ["=" "old-popup?" "popup?"] "instant" ["assoc" "instant" ":popup-v" ["if" "popup?" "3" "-3"]]]]], "quamolit.comp.icon-increase/update-state" ["defn" "update-state" ["x"] ["inc" "x"]], "quamolit.comp.digits/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] ["--" ".log" "js/console" "|stroke updaete" "old-args" "args"] ["let" [["check-number" ["fn" ["new-instant" "the-key" "the-v" "the-target"] ["let" [["old-x" ["get" ["into" ["[]"] "old-args"] "the-key"]] ["new-x" ["get" ["into" ["[]"] "args"] "the-key"]]] ["if" ["=" "old-x" "new-x"] "new-instant" ["assoc" "new-instant" "the-v" ["/" ["-" "new-x" "old-x"] "600"] "the-target" "new-x"]]]]]] ["->" "instant" ["check-number" "0" ":x0-v" ":x0-target"] ["check-number" "1" ":y0-v" ":y0-target"] ["check-number" "2" ":x1-v" ":x1-target"] ["check-number" "3" ":y1-v" ":y1-target"]]]], "quamolit.comp.finder/update-state" ["defn" "update-state" ["state" "target"] ["--" ".log" "js/console" "state" "target"] ["assoc" "state" "1" "target"]], "quamolit.comp.portal/render" ["defn" "render" ["mutate-navigate"] ["fn" ["state" "mutate!" "instant" "tick"] ["group" ["{}"] ["button" ["{}" ":style" ["style-button" "0" "0" "|Todolist" ["hsl" "0" "120" "60"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":todolist"]]]] ["button" ["{}" ":style" ["style-button" "1" "0" "|Clock" ["hsl" "300" "80" "80"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":clock"]]]] ["button" ["{}" ":style" ["style-button" "2" "0" "|Solar" ["hsl" "140" "80" "80"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":solar"]]]] ["button" ["{}" ":style" ["style-button" "3" "0" "|Binary Tree" ["hsl" "140" "20" "30"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":binary-tree"]]]] ["button" ["{}" ":style" ["style-button" "0" "1" "|Table" ["hsl" "340" "80" "80"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":code-table"]]]] ["button" ["{}" ":style" ["style-button" "1" "1" "|Finder" ["hsl" "60" "80" "45"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":finder"]]]] ["button" ["{}" ":style" ["style-button" "2" "1" "|Raining" ["hsl" "260" "80" "80"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":raining"]]]] ["button" ["{}" ":style" ["style-button" "3" "1" "|Icons" ["hsl" "30" "80" "80"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":icons"]]]] ["button" ["{}" ":style" ["style-button" "0" "2" "|Curve" ["hsl" "100" "80" "80"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":curve"]]]] ["button" ["{}" ":style" ["style-button" "1" "2" "|Folding fan" ["hsl" "200" "80" "80"]] ":event" ["{}" ":click" ["handle-navigate" "mutate-navigate" ":folding-fan"]]]]]]], "quamolit.comp.solar/render" ["defn" "render" ["timestamp" "level"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" ":tick" ["/" "tick" "10"]] ["rotate" ["{}" ":style" ["{}" ":angle" ["rem" ["/" "tick" "8"] "360"]]] ["arc" ["{}" ":style" "style-large"]] ["translate" ["{}" ":style" ["{}" ":x" "100" ":y" "-40"]] ["arc" ["{}" ":style" "style-small"]]] ["if" [">" "level" "0"] ["scale" ["{}" ":style" ["{}" ":ratio" "0.8"]] ["translate" ["{}" ":style" ["{}" ":x" "20" ":y" "180"]] ["comp-solar" "timestamp" ["-" "level" "1"]]]]]]]], "quamolit.render.element/rotate" ["def" "rotate" ["create-comp" ":rotate" "render-rotate"]], "quamolit.render.paint/paint-scale" ["defn" "paint-scale" ["ctx" "style"] ["let" [["ratio" ["or" [":ratio" "style"] "1.2"]]] [".scale" "ctx" "ratio" "ratio"]]], "quamolit.comp.todolist/comp-todolist" ["def" "comp-todolist" ["create-comp" ":todolist" "init-state" "merge" "init-instant" "on-tick" "on-update" "on-unmount" "nil" "render"]], "quamolit.comp.icon-increase/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] ["if" ["not=" "old-state" "state"] ["assoc" "instant" ":n-v" "0.004" ":n-target" "state"] "instant"]], "quamolit.comp.folder/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["let" [["new-instant" ["->" "instant" ["iterate-instant" ":presence" ":presence-v" "elapsed" ["[]" "0" "1000"]] ["iterate-instant" ":popup" ":popup-v" "elapsed" ["[]" "0" "1000"]]]]] ["if" ["and" ["<" [":presence-v" "instant"] "0"] ["=" [":presence" "new-instant"] "0"]] ["assoc" "new-instant" ":numb?" "true"] "new-instant"]]], "quamolit.comp.folding-fan/init-instant" ["defn" "init-instant" ["args" "state"] ["{}" ":folding-value" ["if" "state" "1000" "0"] ":folding-v" "0"]], "quamolit.comp.todolist/render" ["defn" "render" ["timestamp" "store"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".info" "js/console" "|todolist:" "store" "state"] ["alpha" ["{}" ":style" ["{}" ":opacity" ["/" [":presence" "instant"] "1000"]]] ["translate" ["{}" ":style" "position-header"] ["translate" ["{}" ":style" ["{}" ":x" "-20" ":y" "40"]] ["input" ["{}" ":style" ["{}" ":w" "400" ":h" "40" ":text" [":draft" "state"]] ":event" ["{}" ":click" ["handle-input" "mutate!" [":draft" "state"]]]]]] ["translate" ["{}" ":style" ["{}" ":x" "240" ":y" "40"]] ["button" ["{}" ":style" "style-button" ":event" ["event-button" "mutate!" [":draft" "state"]]]]]] ["translate" ["{}" ":style" "position-body"] ["group" ["{}"] ["->>" "store" ["reverse"] ["map-indexed" ["fn" ["index" "task"] ["let" [["shift-x" ["max" "-40" ["min" "0" ["*" "-40" ["+" ["if" ["=" ["count" "store"] "1"] "0" ["if" [">" [":presence-v" "instant"] "0"] ["/" "index" ["-" ["count" "store"] "1"]] ["-" "1" ["if" ["=" "index" "0"] "0" ["/" "index" ["-" ["count" "store"] "1"]]]]]] ["-" "1" ["/" [":presence" "instant"] "500"]]]]]]]] ["[]" [":id" "task"] ["comp-task" "timestamp" "task" "index" "shift-x"]]]]]]]] ["comp-debug" "instant" ["{}"]]]]], "quamolit.comp.task/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] ["--" ".log" "js/console" "|on update:" "instant" "old-args" "args"] ["let" [["old-index" ["get" "old-args" "2"]] ["new-index" ["get" "args" "2"]]] ["if" ["not=" "old-index" "new-index"] ["assoc" "instant" ":index-velocity" ["/" ["-" "new-index" [":index" "instant"]] "300"] ":index-target" "new-index"] "instant"]]], "quamolit.comp.digits/comp-5" ["def" "comp-5" ["create-comp" ":five" "render-5"]], "quamolit.comp.file-card/render" ["defn" "render" ["card-name" "position" "navigate-this" "index" "parent-ratio" "popup?"] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["popup-ratio" ["/" [":popup" "instant"] "1000"]] ["shift-x" ["first" "position"]] ["shift-y" ["last" "position"]] ["move-x" ["*" "shift-x" ["+" "0.1" ["*" "0.9" ["-" "1" "popup-ratio"]]]]] ["move-y" ["*" "shift-y" ["+" "0.1" ["*" "0.9" ["-" "1" "popup-ratio"]]]]] ["scale-ratio" ["/" ["+" "0.2" ["*" "0.8" "popup-ratio"]] "parent-ratio"]]] ["translate" ["{}" ":style" ["{}"]] ["alpha" ["{}" ":style" ["{}" ":opacity" ["/" [":presence" "instant"] "1000"]]] ["translate" ["{}" ":style" ["{}" ":x" "move-x" ":y" "move-y"]] ["scale" ["{}" ":style" ["{}" ":ratio" "scale-ratio"]] ["rect" ["{}" ":style" ["{}" ":w" "520" ":h" "360" ":fill-style" ["hsl" "200" "80" "80"]] ":event" ["{}" ":click" ["handle-click" "navigate-this" "index" "popup?"]]] ["text" ["{}" ":style" ["{}" ":fill-style" ["hsl" "0" "0" "100"] ":text" "card-name" ":size" "60"]]]]]]]]]]], "quamolit.controller.resolve/locate-target" ["defn" "locate-target" ["tree" "coord"] ["--" ".log" "js/console" "|locating" "coord" "tree"] ["if" ["=" "0" ["count" "coord"]] "tree" ["let" [["first-pos" ["first" "coord"]]] ["if" ["=" "Component" ["type" "tree"]] ["if" ["=" "first-pos" [":name" "tree"]] ["recur" [":tree" "tree"] ["subvec" "coord" "1"]] "nil"] ["let" [["picked-pair" ["->>" [":children" "tree"] ["filter-first" ["fn" ["child-pair"] ["=" ["first" "child-pair"] "first-pos"]]]]] ["picked" ["if" ["some?" "picked-pair"] ["last" "picked-pair"] "nil"]]] ["if" ["some?" "picked"] ["recur" "picked" ["subvec" "coord" "1"]] "nil"]]]]]], "quamolit.comp.folder/on-unmount" ["defn" "on-unmount" ["instant" "tick"] ["assoc" "instant" ":presence-v" "-3"]], "quamolit.render.paint/paint-alpha" ["defn" "paint-alpha" ["ctx" "style" "eff-ref"] ["let" [["inherent-opacity" ["first" [":alpha-stack" "@eff-ref"]]] ["opacity" ["*" "inherent-opacity" ["or" [":opacity" "style"] "0.5"]]]] ["set!" "ctx.globalAlpha" "opacity"] ["swap!" "eff-ref" "update" ":alpha-stack" ["fn" ["alpha-stack"] ["cons" "opacity" ["rest" "alpha-stack"]]]]]], "quamolit.comp.todolist/handle-input" ["defn" "handle-input" ["mutate!" "default-text"] ["fn" ["simple-event" "dispatch"] ["let" [["user-text" ["js/prompt" "|input to canvas:" "default-text"]]] ["mutate!" ["{}" ":draft" "user-text"]]]]], "quamolit.comp.digits/render-0" ["defn" "render-0" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "0" "0" "40" "0"] ["comp-stroke" "40" "0" "40" "40"] ["comp-stroke" "40" "40" "40" "80"] ["comp-stroke" "40" "80" "0" "80"] ["comp-stroke" "0" "80" "0" "40"] ["comp-stroke" "0" "40" "0" "0"]]]], "quamolit.comp.raining/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] "instant"], "quamolit.comp.ring/render" ["defn" "render" ["timestamp"] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["n" "20"] ["angle" ["/" "360" "n"]] ["shift" "10"] ["rotation" ["mod" ["/" "tick" "40"] "360"]] ["r" "100"] ["rl" "200"] ["curve-points" ["map" ["fn" ["x"] ["let" [["this-angle" ["*" "angle" ["inc" "x"]]] ["angle-1" ["+" ["-" "this-angle" "rotation" "angle"] "shift"]] ["angle-2" ["-" ["+" "this-angle" "rotation"] "shift"]]] ["[]" ["*" "rl" ["sin" "angle-1"]] ["-" "0" ["*" "rl" ["cos" "angle-1"]]] ["*" "rl" ["sin" "angle-2"]] ["-" "0" ["*" "rl" ["cos" "angle-2"]]] ["*" "r" ["sin" "this-angle"]] ["-" "0" ["*" "r" ["cos" "this-angle"]]]]]] ["range" "n"]]]] ["group" ["{}"] ["path" ["{}" ":style" ["{}" [":points" ["concat" ["[]" ["[]" "0" ["-" "0" "r"]]] "curve-points"]] [":line-width" "2"] [":stroke-style" ["hsl" "300" "80" "60"]]]]] ["comp-debug" ["js/Math.floor" "rotation"] ["{}"]]]]]], "quamolit.main/dispatch!" ["defn" "dispatch!" ["op" "op-data"] ["let" [["new-tick" ["get-tick"]] ["new-store" ["updater-fn" "@store-ref" "op" "op-data" "new-tick"]]] ["reset!" "store-ref" "new-store"]]], "quamolit.comp.raindrop/comp-raindrop" ["def" "comp-raindrop" ["create-comp" ":raindrop" "init-instant" "on-tick" "on-update" "on-unmount" "remove?" "render"]], "quamolit.comp.code-table/render" ["defn" "render" [] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" "state"] ["translate" ["{}" ":style" ["{}" ":x" "-160" ":y" "-160"]] ["->>" "state" ["map-indexed" ["fn" ["i" "row"] ["[]" "i" ["group" ["{}"] ["->>" "row" ["map-indexed" ["fn" ["j" "content"] ["[]" "j" ["let" [["move-x" ["*" "i" "100"]] ["move-y" ["*" "j" "60"]]] ["translate" ["{}" ":style" ["{}" ":x" "move-x" ":y" "move-y"]] ["textbox" ["{}" ":style" ["{}" ":w" "80" ":h" "40" ":text" "content"]]]]]]]]]]]]]]]]], "quamolit.comp.digits/render-2" ["defn" "render-2" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "0" "0" "40" "0"] ["comp-stroke" "40" "0" "40" "40"] ["comp-stroke" "40" "40" "0" "40"] ["comp-stroke" "0" "40" "0" "80"] ["comp-stroke" "0" "80" "40" "80"]]]], "quamolit.comp.digits/render-5" ["defn" "render-5" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "40" "0" "0" "0"] ["comp-stroke" "0" "0" "0" "40"] ["comp-stroke" "0" "40" "40" "40"] ["comp-stroke" "40" "40" "40" "80"] ["comp-stroke" "40" "80" "0" "80"]]]], "quamolit.comp.digits/comp-stroke" ["def" "comp-stroke" ["create-comp" ":stroke" "init-instant" "on-tick" "on-update" "on-unmount" "nil" "render"]], "quamolit.comp.task-toggler/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["iterate-instant" "instant" ":done-value" ":done-velocity" "elapsed" ["[]" "0" "1000"]]], "quamolit.alias/native-translate" ["defn" "native-translate" ["props" "&" "children"] ["create-shape" ":native-translate" "props" "children"]], "quamolit.comp.digits/comp-3" ["def" "comp-3" ["create-comp" ":three" "render-3"]], "quamolit.comp.icon-increase/init-instant" ["defn" "init-instant" ["args" "state"] ["{}" ":n" "state" ":n-v" "0" ":n-target" "state"]], "quamolit.render.paint/paint-rotate" ["defn" "paint-rotate" ["ctx" "style"] ["let" [["angle" ["or" [":angle" "style"] "30"]]] [".rotate" "ctx" "angle"]]], "quamolit.comp.folding-fan/comp-folding-fan" ["def" "comp-folding-fan" ["create-comp" ":folding-fan" "init-state" "update-state" "init-instant" "on-tick" "on-update" "on-unmount" "remove?" "render"]], "quamolit.render.paint/paint-one" ["defn" "paint-one" ["ctx" "directive" "eff-ref"] ["let" [["coord" [":coord" "directive"]] ["op" [":name" "directive"]] ["style" [":style" "directive"]]] ["--" ".log" "js/console" ":paint-one" "op" "style"] ["case" "op" [":line" ["paint-line" "ctx" "style"]] [":path" ["paint-path" "ctx" "style"]] [":text" ["paint-text" "ctx" "style"]] [":rect" ["paint-rect" "ctx" "style" "coord"]] [":native-save" ["paint-save" "ctx" "style" "eff-ref"]] [":native-restore" ["paint-restore" "ctx" "style" "eff-ref"]] [":native-translate" ["paint-translate" "ctx" "style"]] [":native-alpha" ["paint-alpha" "ctx" "style" "eff-ref"]] [":native-rotate" ["paint-rotate" "ctx" "style"]] [":native-scale" ["paint-scale" "ctx" "style"]] [":arc" ["paint-arc" "ctx" "style" "coord"]] [":image" ["paint-image" "ctx" "style" "coord"]] [":group" ["paint-group!"]] ["do" [".log" "js/console" "|painting not implemented" "op"] "@eff-ref"]]]], "quamolit.comp.task-toggler/style-toggler" ["defn" "style-toggler" ["done-value"] ["{}" [":w" "40"] [":h" "40"] [":fill-style" ["hsl" ["tween" ["[]" "360" "200"] ["[]" "0" "1000"] "done-value"] "80" ["tween" ["[]" "40" "80"] ["[]" "0" "1000"] "done-value"]]]]], "quamolit.comp.folding-fan/remove?" ["defn" "remove?" ["instant"] "true"], "quamolit.comp.finder/comp-finder" ["def" "comp-finder" ["create-comp" ":finder" "init-state" "update-state" "render"]], "quamolit.core/directives-ref" ["defonce" "directives-ref" ["atom" ["[]"]]], "quamolit.main/on-jsload" ["defn" "on-jsload" [] ["js/cancelAnimationFrame" "@loop-ref"] ["js/requestAnimationFrame" "render-loop!"] [".log" "js/console" "|code updated..."]], "quamolit.comp.task/init-instant" ["defn" "init-instant" ["args" "state" "at-place?"] ["let" [["index" ["get" "args" "2"]]] ["{}" [":numb?" "false"] [":presence" "0"] [":presence-velocity" "3"] [":left" ["if" "at-place?" "-40" "0"]] [":left-velocity" ["if" "at-place?" "0.09" "0"]] [":index" "index"] [":index-velocity" "0"]]]], "quamolit.alias/default-on-tick" ["defn" "default-on-tick" ["instant" "tick" "elapsed"] "instant"], "quamolit.render.element/render-rotate" ["defn" "render-rotate" ["props" "&" "children"] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["style" [":style" "props"]] ["angle" ["*" "pi-ratio" ["or" [":angle" "style"] "30"]]]] ["--" ".log" "js/console" "|actual degree:" "angle"] ["group" ["{}"] ["native-save" ["{}"]] ["native-rotate" ["{}" ":style" ["{}" ":angle" "angle"]]] ["group" ["{}"] ["arrange-children" "children"]] ["native-restore" ["{}"]]]]]], "quamolit.core/focus-ref" ["defonce" "focus-ref" ["atom" ["[]"]]], "quamolit.comp.raining/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["if" [">" ["rand-int" "100"] "40"] ["conj" ["subvec" "instant" "3"] ["[]" ["get-tick"] ["random-point"]] ["[]" ["get-tick"] ["random-point"]] ["[]" ["get-tick"] ["random-point"]]] "instant"]], "quamolit.comp.solar/comp-solar" ["def" "comp-solar" ["create-comp" ":solar" "render"]], "quamolit.comp.todolist/init-state" ["defn" "init-state" ["store"] ["{}" ":draft" "|"]], "quamolit.comp.todolist/on-unmount" ["defn" "on-unmount" ["instant" "tick"] ["assoc" "instant" ":presence-v" "-3"]], "quamolit.render.paint/paint-group!" ["defn" "paint-group!" []], "quamolit.comp.digits/on-unmount" ["defn" "on-unmount" ["instant" "tick"] ["--" ".log" "js/console" "|stroke unmount"] ["assoc" "instant" ":presence-v" "-0.003" ":numb?" "false"]], "quamolit.updater.core/task-update" ["defn" "task-update" ["store" "op-data" "tick"] ["let" [[["[]" "task-id" "text"] "op-data"]] ["->>" "store" ["mapv" ["fn" ["task"] ["if" ["=" "task-id" [":id" "task"]] ["assoc" "task" ":text" "text"] "task"]]]]]], "quamolit.alias/native-clip" ["defn" "native-clip" ["props" "&" "children"] ["create-shape" ":native-clip" "props" "children"]], "quamolit.comp.ring/comp-ring" ["def" "comp-ring" ["create-comp" ":ring" "render"]], "quamolit.comp.folder/update-state" ["defn" "update-state" ["state" "target"] "target"], "quamolit.comp.todolist/position-header" ["def" "position-header" ["{}" [":x" "0"] [":y" "-200"]]], "quamolit.updater.core/task-rm" ["defn" "task-rm" ["store" "op-data" "tick"] ["->>" "store" ["filterv" ["fn" ["task"] ["not=" "op-data" [":id" "task"]]]]]], "quamolit.core/tick-ref" ["defonce" "tick-ref" ["atom" ["get-tick"]]], "quamolit.comp.container/style-button" ["defn" "style-button" ["guide-text"] ["{}" [":text" "guide-text"] [":surface-color" ["hsl" "200" "80" "50"]] [":text-color" ["hsl" "200" "80" "100"]] [":font-size" "16"] [":w" "80"] [":h" "32"]]], "quamolit.comp.fade-in-out/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] "instant"], "quamolit.render.element/input" ["def" "input" ["create-comp" ":input" "render-input"]], "quamolit.comp.binary-tree/render" ["defn" "render" ["timestamp" "level"] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [[["[]" "r1" "r2" "r3" "r4"] "state"] ["x1" "120"] ["y1" "-220"] ["x1-2" "10"] ["y1-2" "-80"] ["x2" "-140"] ["y2" "-100"] ["shift-a" ["*" ["+" "0.02" ["*" "0.001" "r1"]] ["js/Math.sin" ["/" "tick" ["+" ["*" "r2" "100"] "800"]]]]] ["shift-b" ["*" ["+" "0.03" ["*" "0.001" "r3"]] ["js/Math.sin" ["/" "tick" ["+" "1300" ["*" "60" "r4"]]]]]]] ["group" ["{}"] ["path" ["{}" ":style" ["{}" [":points" ["[]" ["[]" "x1" "y1"] ["[]" "0" "0"] ["[]" "x2" "y2"]]] [":stroke-style" ["hsl" "200" "80" "50"]]]]] ["if" [">" "level" "0"] ["translate" ["{}" ":style" ["{}" ":x" "x1" ":y" "y1"]] ["scale" ["{}" ":style" ["{}" ":ratio" ["+" ["*" "0.2" "shift-a"] "0.5"]]] ["rotate" ["{}" ":style" ["{}" ":angle" ["+" ["*" "3" "shift-a"] "10"]]] ["comp-binary-tree" "timestamp" ["dec" "level"]]]]]] ["if" [">" "level" "0"] ["translate" ["{}" ":style" ["{}" ":x" "x2" ":y" "y2"]] ["scale" ["{}" ":style" ["{}" ":ratio" ["+" "0.83" ["*" "2" "shift-b"]]]] ["rotate" ["{}" ":style" ["{}" ":angle" ["+" ["*" "50" "shift-b"] "10"]]] ["comp-binary-tree" "timestamp" ["dec" "level"]]]]]]]]]], "quamolit.comp.container/handle-back" ["defn" "handle-back" ["mutate!"] ["fn" ["event" "dispatch"] ["mutate!" ":portal"]]], "quamolit.comp.digits/render-8" ["defn" "render-8" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "0" "0" "40" "0"] ["comp-stroke" "40" "0" "40" "40"] ["comp-stroke" "40" "40" "40" "80"] ["comp-stroke" "40" "80" "0" "80"] ["comp-stroke" "0" "80" "0" "40"] ["comp-stroke" "0" "40" "0" "0"] ["comp-stroke" "0" "40" "40" "40"]]]], "quamolit.comp.task/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["--" ".log" "js/console" "|on tick data:" "instant" "tick" "elapsed"] ["let" [["v" [":presence-velocity" "instant"]] ["new-instant" ["->" "instant" ["iterate-instant" ":presence" ":presence-velocity" "elapsed" ["[]" "0" "1000"]] ["iterate-instant" ":index" ":index-velocity" "elapsed" ["repeat" "2" [":index-target" "instant"]]] ["iterate-instant" ":left" ":left-velocity" "elapsed" ["[]" "-40" "0"]]]]] ["if" ["and" ["<" "v" "0"] ["=" "0" [":presence" "new-instant"]]] ["assoc" "new-instant" ":numb?" "true"] "new-instant"]]], "quamolit.comp.icon-play/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] ["if" ["=" "old-state" "state"] "instant" ["let" [["next-value" ["if" "state" "1" "0"]] ["next-v" ["if" "state" "0.002" "-0.002"]]] ["assoc" "instant" ":play-target" "next-value" ":play-v" "next-v"]]]], "quamolit.render.element/handle-keydown" ["defn" "handle-keydown" ["mutate!"] ["fn" ["event" "dispatch"] ["mutate!" [".-keyCode" "event"] [".-shiftKey" "event"]]]], "quamolit.comp.debug/comp-debug" ["def" "comp-debug" ["create-comp" ":debug" "render"]], "quamolit.comp.finder/card-collection" ["def" "card-collection" ["[]" ["[]" "|喷雪花" "|檵木" "|石楠" "|文竹"] ["[]" "|紫云英" "|绣球花" "|蔷薇"] ["[]" "|金银花" "|栗树" "|婆婆纳" "|鸡爪槭"] ["[]" "|卷柏" "|稻" "|马尾松" "|五角星花" "|苔藓"] ["[]" "|芍药" "|木棉"]]], "quamolit.comp.task-toggler/render" ["defn" "render" ["done?" "task-id"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" "|done:" "instant"] ["rect" ["{}" ":style" ["style-toggler" [":done-value" "instant"]] ":event" ["{}" ":click" ["handle-click" "task-id"]]]]]], "quamolit.comp.digits/comp-4" ["def" "comp-4" ["create-comp" ":four" "render-4"]], "quamolit.comp.binary-tree/comp-binary-tree" ["def" "comp-binary-tree" ["create-comp" ":binary-tree" "init-state" "merge" "render"]], "quamolit.alias/text" ["defn" "text" ["props" "&" "children"] ["create-shape" ":text" "props" "children"]], "quamolit.comp.raindrop/init-instant" ["defn" "init-instant" ["args" "state" "at-place?"] ["{}" [":presence" "0"] [":presence-v" "3"] [":begin-tick" [".valueOf" ["js/Date."]]]]], "quamolit.render.paint/paint-arc" ["defn" "paint-arc" ["ctx" "style" "coord"] ["let" [["x" ["or" [":x" "style"] "0"]] ["y" ["or" [":y" "style"] "0"]] ["r" ["or" [":r" "style"] "40"]] ["s-angle" ["*" "pi-ratio" ["or" [":s-angle" "style"] "0"]]] ["e-angle" ["*" "pi-ratio" ["or" [":e-angle" "style"] "60"]]] ["line-width" ["or" [":line-width" "style"] "4"]] ["counterclockwise" ["or" [":counterclockwise" "style"] "true"]] ["line-cap" ["or" [":line-cap" "style"] "|round"]] ["line-join" ["or" [":line-join" "style"] "|round"]] ["miter-limit" ["or" [":miter-limit" "style"] "8"]]] [".beginPath" "ctx"] [".arc" "ctx" "x" "y" "r" "s-angle" "e-angle" "counterclockwise"] ["let" [["caller" ["aget" "ctx" "|addHitRegion"]] ["options" ["clj->js" ["{}" ":id" ["pr-str" "coord"]]]]] ["--" ".log" "js/console" "|hit region" "coord" ["some?" "caller"]] ["if" ["some?" "caller"] [".call" "caller" "ctx" "options"]]] ["if" ["some?" [":fill-style" "style"]] ["do" ["set!" "ctx.fillStyle" [":fill-style" "style"]] [".fill" "ctx"]]] ["if" ["some?" [":stroke-style" "style"]] ["do" ["set!" "ctx.lineWidth" "line-width"] ["set!" "ctx.strokeStyle" [":stroke-style" "style"]] ["set!" "ctx.lineCap" "line-cap"] ["set!" "ctx.miterLimit" "miter-limit"] [".stroke" "ctx"]]]]], "quamolit.alias/native-alpha" ["defn" "native-alpha" ["props" "&" "children"] ["create-shape" ":native-alpha" "props" "children"]], "quamolit.comp.file-card/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["let" [["new-instant" ["->" "instant" ["iterate-instant" ":presence" ":presence-v" "elapsed" ["[]" "0" "1000"]] ["iterate-instant" ":popup" ":popup-v" "elapsed" ["[]" "0" "1000"]]]]] ["if" ["and" ["<" [":presence-v" "instant"] "0"] ["=" [":presence" "new-instant"] "0"]] ["assoc" "new-instant" ":numb?" "true"] "new-instant"]]], "quamolit.comp.digits/render" ["defn" "render" ["x0" "y0" "x1" "y1"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" "|watching" [":presence" "instant"]] ["group" ["{}"] ["alpha" ["{}" ":style" ["{}" ":opacity" [":presence" "instant"]]] ["line" ["{}" ":style" ["{}" [":x0" [":x0" "instant"]] [":y0" [":y0" "instant"]] [":x1" [":x1" "instant"]] [":y1" [":y1" "instant"]]]]]]]]], "quamolit.comp.raining/render" ["defn" "render" ["timestamp"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" ["pr-str" "instant"]] ["group" ["{}"] ["->>" "instant" ["map" ["fn" ["entry"] ["let" [["child-key" ["first" "entry"]] ["child" ["last" "entry"]]] ["[]" "child-key" ["comp-raindrop" "child" "timestamp"]]]]]]]]], "quamolit.comp.icon-play/on-unmount" ["defn" "on-unmount" ["instant" "tick"] "instant"], "quamolit.comp.icon-increase/init-state" ["defn" "init-state" [] "0"], "quamolit.comp.task/handle-remove" ["defn" "handle-remove" ["task-id"] ["fn" ["event" "dispatch"] ["dispatch" ":rm" "task-id"]]], "quamolit.render.paint/paint-save" ["defn" "paint-save" ["ctx" "style" "eff-ref"] [".save" "ctx"] ["swap!" "eff-ref" "update" ":alpha-stack" ["fn" ["alpha-stack"] ["cons" "ctx.globalAlpha" "alpha-stack"]]]], "quamolit.schema/task" ["def" "task" ["{}" [":text" "|"] [":id" "nil"] [":done?" "false"]]], "quamolit.render.paint/paint" ["defn" "paint" ["ctx" "tree" "eff-ref"] ["if" ["=" "Component" ["type" "tree"]] ["recur" "ctx" [":tree" "tree"] "eff-ref"] ["do" ["paint-one" "ctx" "tree" "eff-ref"] ["doseq" ["[]" "cursor" [":children" "tree"]] ["paint" "ctx" ["last" "cursor"] "eff-ref"]]]]], "quamolit.main/-main" ["defn" "-main" [] ["devtools/install!"] ["enable-console-print!"] ["let" [["target" [".querySelector" "js/document" "|#app"]]] ["configure-canvas" "target"] ["setup-events" "target" "dispatch!"] ["js/requestAnimationFrame" "render-loop!"]]], "quamolit.comp.digits/comp-6" ["def" "comp-6" ["create-comp" ":six" "render-6"]], "quamolit.render.element/pi-ratio" ["def" "pi-ratio" ["/" "js/Math.PI" "180"]], "quamolit.comp.finder/handle-back" ["defn" "handle-back" ["mutate!"] ["fn" ["event" "dispatch"] ["mutate!" "nil"]]], "quamolit.comp.fade-in-out/on-unmount" ["defn" "on-unmount" ["instant" "tick"] ["assoc" "instant" ":presence-v" "-3"]], "quamolit.comp.raindrop/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] "instant"], "quamolit.alias/bezier" ["defn" "bezier" ["props" "&" "children"] ["create-shape" ":bezier" "props" "children"]], "quamolit.render.element/translate" ["def" "translate" ["create-comp" ":translate" "render-translate"]], "quamolit.render.paint/image-pool" ["defonce" "image-pool" ["atom" ["{}"]]], "quamolit.controller.resolve/resolve-target" ["defn" "resolve-target" ["tree" "event-name" "coord"] ["let" [["maybe-target" ["locate-target" "tree" "coord"]]] ["--" ".log" "js/console" "|target" "maybe-target" "event-name" "coord"] ["if" ["nil?" "maybe-target"] "nil" ["let" [["maybe-listener" ["get-in" "maybe-target" ["[]" ":event" "event-name"]]]] ["--" ".log" "js/console" "|listener" "maybe-listener" "maybe-target"] ["if" ["some?" "maybe-listener"] "maybe-listener" ["if" ["=" "0" ["count" "coord"]] "nil" ["recur" "tree" "event-name" ["subvec" "coord" "0" ["-" ["count" "coord"] "1"]]]]]]]]], "quamolit.comp.task/style-input" ["defn" "style-input" ["text"] ["{}" [":w" "400"] [":h" "40"] [":x" "40"] [":y" "0"] [":fill-style" ["hsl" "0" "0" "60"]] [":text" "text"]]], "quamolit.comp.digits/comp-7" ["def" "comp-7" ["create-comp" ":seven" "render-7"]], "quamolit.comp.icon-play/init-state" ["defn" "init-state" [] "true"], "quamolit.comp.digits/comp-2" ["def" "comp-2" ["create-comp" ":two" "render-2"]], "quamolit.comp.icon-increase/handle-click" ["defn" "handle-click" ["mutate!"] ["fn" ["event" "dispatch"] ["mutate!"]]], "quamolit.render.expand/merge-children" ["defn" "merge-children" ["acc" "old-children" "new-children" "coord" "states" "build-mutate" "at-place?" "tick" "elapsed"] ["let" [["new-n" ["count" "new-children"]] ["old-n" ["count" "old-children"]] ["old-cursor" ["first" "old-children"]] ["new-cursor" ["first" "new-children"]]] ["cond" [["and" ["=" "old-n" "0"] ["=" "new-n" "0"]] "acc"] [["and" [">" "old-n" "0"] [">" "new-n" "0"] ["=" ["key" "old-cursor"] ["key" "new-cursor"]]] ["recur" ["conj" "acc" ["[]" ["key" "new-cursor"] ["val" "new-cursor"]]] ["subvec" "old-children" "1"] ["subvec" "new-children" "1"] "coord" "states" "build-mutate" "at-place?" "tick" "elapsed"]] [["and" [">" "new-n" "0"] ["or" ["=" "old-n" "0"] ["and" [">" "old-n" "0"] ["=" "1" ["compare" ["key" "old-cursor"] ["key" "new-cursor"]]]]]] ["let" [["child-key" ["first" "new-cursor"]] ["child" ["last" "new-cursor"]] ["new-acc" ["conj" "acc" ["[]" "child-key" "child"]]]] ["recur" "new-acc" "old-children" ["subvec" "new-children" "1"] "coord" "states" "build-mutate" "at-place?" "tick" "elapsed"]]] [["and" [">" "old-n" "0"] ["or" ["=" "new-n" "0"] ["and" [">" "new-n" "0"] ["=" "-1" ["compare" ["key" "old-cursor"] ["key" "new-cursor"]]]]]] ["let" [["child-key" ["first" "old-cursor"]] ["child" ["last" "old-cursor"]] ["component?" ["=" "Component" ["type" "child"]]] ["child-coord" ["conj" "coord" "child-key"]] ["new-acc" ["if" "component?" ["if" [":fading?" "child"] ["if" ["let" [["remove?" [":remove?" "child"]]] ["remove?" [":instant" "child"]]] "acc" ["conj" "acc" ["[]" "child-key" ["expand-component" "child" "child" "child-coord" "states" "build-mutate" "at-place?" "tick" "elapsed"]]]] ["let" [["old-instant" [":instant" "child"]] ["on-unmount" [":on-unmount" "child"]] ["new-instant" ["on-unmount" "old-instant"]]] ["conj" "acc" ["[]" "child-key" ["assoc" "child" ":instant" "new-instant" ":fading?" "true"]]]]] "acc"]]] ["recur" "new-acc" ["subvec" "old-children" "1"] "new-children" "coord" "states" "build-mutate" "at-place?" "tick" "elapsed"]]] [":else" "acc"]]]], "quamolit.comp.folding-fan/on-update" ["defn" "on-update" ["instant" "old-args" "old-state" "args" "state"] ["if" ["not=" "old-state" "state"] ["assoc" "instant" ":folding-v" ["if" "state" "2" "-2"]] "instant"]], "quamolit.comp.icon-play/update-state" ["def" "update-state" "not"], "quamolit.comp.icons-table/comp-icons-table" ["def" "comp-icons-table" ["create-comp" ":icons-table" "render"]], "quamolit.comp.todolist/event-button" ["defn" "event-button" ["mutate!" "draft"] ["{}" ":click" ["fn" ["simple-event" "dispatch"] ["dispatch" ":add" "draft"] ["mutate!" ["{}" ":draft" "|"]]]]], "quamolit.comp.digits/render-7" ["defn" "render-7" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "0" "0" "40" "0"] ["comp-stroke" "40" "0" "40" "40"] ["comp-stroke" "40" "40" "40" "80"]]]], "quamolit.comp.container/update-state" ["defn" "update-state" ["old-state" "new-page"] "new-page"], "quamolit.comp.folder/init-state" ["defn" "init-state" ["cards" "position" "_" "index" "popup?"] "nil"], "quamolit.comp.digits/comp-0" ["def" "comp-0" ["create-comp" ":zero" "render-0"]], "quamolit.comp.raindrop/render" ["defn" "render" ["position" "timestamp"] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["x" ["first" "position"]] ["y" ["last" "position"]]] ["alpha" ["{}" ":style" ["{}" ":opacity" ["*" [":presence" "instant"] "0.001"]]] ["rect" ["{}" ":style" ["{}" [":fill-style" ["hsl" "200" "80" "60"]] [":w" "4"] [":h" "30"] [":x" "x"] [":y" ["+" "y" ["*" "0.04" ["-" "tick" [":begin-tick" "instant"]]]]]]]]]]]], "quamolit.comp.icon-play/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["iterate-instant" "instant" ":play-value" ":play-v" "elapsed" ["[]" [":play-target" "instant"] [":play-target" "instant"]]]], "quamolit.comp.folder/handle-back" ["defn" "handle-back" ["mutate-navitate" "index"] ["fn" ["event" "dispatch"] ["mutate-navitate" "index"]]], "quamolit.alias/default-init-state" ["defn" "default-init-state" ["&" "args"] ["{}"]], "quamolit.comp.digits/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["let" [["fading?" ["<" [":presence-v" "instant"] "0"]] ["new-instant" ["->" "instant" ["iterate-instant" ":presence" ":presence-v" "elapsed" ["[]" "0" "1"]] ["iterate-instant" ":x0" ":x0-v" "elapsed" ["repeat" "2" [":x0-target" "instant"]]] ["iterate-instant" ":y0" ":y0-v" "elapsed" ["repeat" "2" [":y0-target" "instant"]]] ["iterate-instant" ":x1" ":x1-v" "elapsed" ["repeat" "2" [":x1-target" "instant"]]] ["iterate-instant" ":y1" ":y1-v" "elapsed" ["repeat" "2" [":y1-target" "instant"]]]]]] ["if" ["and" "fading?" ["=" "0" [":presence" "new-instant"]]] ["assoc" "new-instant" ":numb?" "true"] "new-instant"]]], "quamolit.comp.container/render" ["defn" "render" ["timestamp" "store"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" "state"] ["group" ["{}" [":style" ["{}"]]] ["if" ["=" "state" ":portal"] ["comp-fade-in-out" ["{}"] ["comp-portal" "mutate!"]]] ["if" ["=" "state" ":todolist"] ["comp-todolist" "timestamp" "store"]] ["if" ["=" "state" ":clock"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "0"]] ["comp-clock" "timestamp"]]]] ["if" ["=" "state" ":solar"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "0"]] ["comp-solar" "timestamp" "8"]]]] ["if" ["=" "state" ":binary-tree"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "240"]] ["comp-binary-tree" "timestamp" "5"]]]] ["if" ["=" "state" ":code-table"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "40"]] ["comp-code-table"]]]] ["if" ["=" "state" ":finder"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "40"]] ["comp-finder" "timestamp"]]]] ["if" ["=" "state" ":raining"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "40"]] ["comp-raining" "timestamp"]]]] ["if" ["=" "state" ":icons"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "40"]] ["comp-icons-table" "timestamp"]]]] ["if" ["=" "state" ":curve"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "40"]] ["comp-ring" "timestamp"]]]] ["if" ["=" "state" ":folding-fan"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "0" ":y" "40"]] ["comp-folding-fan"]]]] ["if" ["not=" "state" ":portal"] ["comp-fade-in-out" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "-400" ":y" "-140"]] ["button" ["{}" ":style" ["style-button" "|Back"] ":event" ["{}" ":click" ["handle-back" "mutate!"]]]]]]]]]], "quamolit.comp.portal/handle-navigate" ["defn" "handle-navigate" ["mutate-navigate" "next-page"] ["fn" ["event" "dispatch"] ["mutate-navigate" "next-page"]]], "quamolit.core/setup-events" ["defn" "setup-events" ["root-element" "dispatch"] ["let" [["ctx" [".getContext" "root-element" "|2d"]]] [".addEventListener" "root-element" "|click" ["fn" ["event"] ["let" [["hit-region" ["aget" "event" "|region"]]] ["--" ".log" "js/console" "|hit:" "event" "hit-region"] ["if" ["some?" "hit-region"] ["let" [["coord" ["reader/read-string" "hit-region"]]] ["reset!" "focus-ref" "coord"] ["handle-event" "coord" ":click" "event" "dispatch"]] ["reset!" "focus-ref" ["[]"]]]]]] [".addEventListener" "root-element" "|keypress" ["fn" ["event"] ["let" [["coord" "@focus-ref"]] ["handle-event" "coord" ":keypress" "event" "dispatch"]]]] [".addEventListener" "root-element" "|keydown" ["fn" ["event"] ["let" [["coord" "@focus-ref"]] ["handle-event" "coord" ":keydown" "event" "dispatch"]]]] ["if" ["nil?" ["aget" "ctx" "|addHitRegion"]] ["js/alert" "|You need to enable experimental canvas features to view this app"]]]], "quamolit.comp.digits/render-3" ["defn" "render-3" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "0" "0" "40" "0"] ["comp-stroke" "40" "0" "40" "40"] ["comp-stroke" "40" "40" "40" "80"] ["comp-stroke" "40" "80" "0" "80"] ["comp-stroke" "40" "40" "0" "40"]]]], "quamolit.updater.core/task-toggle" ["defn" "task-toggle" ["store" "op-data" "tick"] ["->>" "store" ["mapv" ["fn" ["task"] ["if" ["=" "op-data" [":id" "task"]] ["update" "task" ":done?" "not"] "task"]]]]], "quamolit.comp.clock/render" ["defn" "render" ["timestamp"] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["now" ["js/Date."]] ["hrs" [".getHours" "now"]] ["mins" [".getMinutes" "now"]] ["secs" [".getSeconds" "now"]] ["get-ten" ["fn" ["x"] ["js/Math.floor" ["/" "x" "10"]]]] ["get-one" ["fn" ["x"] ["mod" "x" "10"]]]] ["--" ".log" "js/console" "secs"] ["group" ["{}"] ["comp-digit" ["get-ten" "hrs"] ["{}" ":style" ["{}" ":x" "-200"]]] ["comp-digit" ["get-one" "hrs"] ["{}" ":style" ["{}" ":x" "-140"]]] ["comp-digit" ["get-ten" "mins"] ["{}" ":style" ["{}" ":x" "-60"]]] ["comp-digit" ["get-one" "mins"] ["{}" ":style" ["{}" ":x" "0"]]] ["comp-digit" ["get-ten" "secs"] ["{}" ":style" ["{}" ":x" "80"]]] ["comp-digit" ["get-one" "secs"] ["{}" ":style" ["{}" ":x" "140"]]] ["comp-debug" "now" ["{}" ":y" "-60"]]]]]], "quamolit.render.element/render-textbox" ["defn" "render-textbox" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["style" ["assoc" [":style" "props"] ":text" "state"]]] ["input" ["{}" ":style" "style" ":event" ["{}" ":keydown" ["handle-keydown" "mutate!"]]]]]]], "quamolit.render.element/render-translate" ["defn" "render-translate" ["props" "&" "children"] ["let" [["style" ["merge" ["{}" ":x" "0" ":y" "0"] [":style" "props"]]]] ["fn" ["state" "mutate!" "instant" "tick"] ["group" ["{}"] ["native-save" ["{}"]] ["native-translate" ["assoc" "props" ":style" "style"]] ["group" ["{}"] ["arrange-children" "children"]] ["native-restore" ["{}"]]]]]], "quamolit.alias/arrange-children" ["defn" "arrange-children" ["children"] ["sort-by" "first" ["if" ["and" ["=" ["count" "children"] "1"] ["not" ["or" ["=" "Component" ["type" ["first" "children"]]] ["=" "Shape" ["type" ["first" "children"]]]]]] ["first" "children"] ["->>" "children" ["map-indexed" "vector"] ["filter" ["fn" ["entry"] ["some?" ["val" "entry"]]]]]]]], "quamolit.util.detect/map-of-children?" ["defn" "map-of-children?" ["x"] ["and" ["map?" "x"] ["every?" ["fn" ["entry"] ["and" ["map?" ["val" "entry"]] ["contains?" ["val" "entry"] ":type"]]] "x"]]], "quamolit.comp.fade-in-out/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["let" [["new-instant" ["iterate-instant" "instant" ":presence" ":presence-v" "elapsed" ["[]" "0" "1000"]]]] ["if" ["and" ["<" [":presence-v" "instant"] "0"] ["=" [":presence" "new-instant"] "0"]] ["assoc" "new-instant" ":numb?" "true"] "new-instant"]]], "quamolit.render.expand/contain-markups?" ["defn" "contain-markups?" ["items"] ["let" [["result" ["some" ["fn" ["item"] ["if" ["or" ["=" "Component" ["type" "item"]] ["=" "Shape" ["type" "item"]]] "true" ["if" ["and" ["map?" "item"] [">" ["count" "item"] "0"]] ["some" ["fn" ["child"] ["or" ["=" "Component" ["type" "child"]] ["=" "Shape" ["type" "child"]]]] ["vals" "item"]] "false"]]] "items"]]] ["--" "if" ["not" "result"] [".log" "js/console" "result" "items"]] "result"]], "quamolit.comp.digits/init-instant" ["defn" "init-instant" ["args" "state"] ["--" ".log" "js/console" "|stroke init:" "args"] ["let" [["style" [":style" ["first" "args"]]] [["[]" "x0" "y0" "x1" "y1"] "args"]] ["{}" [":numb?" "false"] [":presence" "0"] [":presence-v" "0.003"] [":x0" "x0"] [":x1" "x1"] [":y0" "y0"] [":y1" "y1"] [":x0-v" "0"] [":x1-v" "0"] [":y0-v" "0"] [":y1-v" "0"] [":x0-target" "0"] [":y0-target" "0"] [":x1-target" "0"] [":y1-target" "0"]]]], "quamolit.render.paint/pi-ratio" ["def" "pi-ratio" ["/" "js/Math.PI" "180"]], "quamolit.render.element/button" ["def" "button" ["create-comp" ":button" "render-button"]], "quamolit.render.element/render-alpha" ["defn" "render-alpha" ["props" "&" "children"] ["let" [["style" ["merge" ["{}" ":opacity" "0.5"] [":style" "props"]]]] ["fn" ["state" "mutate!" "instant" "tick"] ["group" ["{}"] ["native-save" ["{}"]] ["native-alpha" ["assoc" "props" ":style" "style"]] ["group" ["{}"] ["arrange-children" "children"]] ["native-restore" ["{}"]]]]]], "quamolit.comp.raindrop/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["iterate-instant" "instant" ":presence" ":presence-v" "elapsed" ["[]" "0" "1000"]]], "quamolit.render.expand/expand-app" ["defn" "expand-app" ["markup" "old-tree" "states" "build-mutate" "tick" "elapsed"] ["--" ".log" "js/console" "|caches:" ["map" "first" ["map" "key" "@comp-caches"]]] ["let" [["initial-coord" ["[]"]]] ["expand-component" "markup" "old-tree" "initial-coord" "states" "build-mutate" "true" "tick" "elapsed"]]], "quamolit.alias/native-transform" ["defn" "native-transform" ["props" "&" "children"] ["create-shape" ":native-transform" "props" "children"]], "quamolit.render.paint/paint-rect" ["defn" "paint-rect" ["ctx" "style" "coord"] ["let" [["w" ["or" [":w" "style"] "100"]] ["h" ["or" [":h" "style"] "40"]] ["x" ["-" ["or" [":x" "style"] "0"] ["/" "w" "2"]]] ["y" ["-" ["or" [":y" "style"] "0"] ["/" "h" "2"]]] ["line-width" ["or" [":line-width" "style"] "2"]]] [".beginPath" "ctx"] [".rect" "ctx" "x" "y" "w" "h"] ["let" [["caller" ["aget" "ctx" "|addHitRegion"]] ["options" ["clj->js" ["{}" ":id" ["pr-str" "coord"]]]]] ["--" ".log" "js/console" "|hit region" "coord" ["some?" "caller"]] ["if" ["some?" "caller"] [".call" "caller" "ctx" "options"]]] ["if" ["contains?" "style" ":fill-style"] ["do" ["set!" "ctx.fillStyle" [":fill-style" "style"]] [".fill" "ctx"]]] ["if" ["contains?" "style" ":stroke-style"] ["do" ["set!" "ctx.strokeStyle" [":stroke-style" "style"]] ["set!" "ctx.lineWidth" "line-width"] [".stroke" "ctx"]]]]], "quamolit.render.element/render-button" ["defn" "render-button" ["props"] ["--" ".log" "js/console" [":style" "props"]] ["let" [["style" [":style" "props"]] ["guide-text" ["or" [":text" "style"] "|button"]] ["x" ["or" [":x" "style"] "0"]] ["y" ["or" [":y" "style"] "0"]] ["w" ["or" [":w" "style"] "100"]] ["h" ["or" [":h" "style"] "40"]] ["style-bg" ["{}" [":x" "x"] [":y" "y"] [":fill-style" ["or" [":surface-color" "style"] ["hsl" "0" "80" "80"]]] [":w" "w"] [":h" "h"]]] ["event-button" [":event" "props"]] ["style-text" ["{}" [":fill-style" ["or" [":text-color" "style"] ["hsl" "0" "0" "10"]]] [":text" "guide-text"] [":size" ["or" [":font-size" "style"] "20"]] [":font-family" ["or" [":font-family" "style"] "|Optima"]] [":text-align" "|center"] [":x" "x"] [":y" "y"]]]] ["fn" ["state" "mutate!" "instant" "tick"] ["group" ["{}"] ["rect" ["{}" ":style" "style-bg" ":event" "event-button"]] ["text" ["{}" ":style" "style-text"]]]]]], "quamolit.comp.fade-in-out/comp-fade-in-out" ["def" "comp-fade-in-out" ["create-comp" ":fade-in-out" "init-instant" "on-tick" "on-update" "on-unmount" "nil" "render"]], "quamolit.comp.solar/style-large" ["def" "style-large" ["{}" [":fill-style" ["hsl" "80" "80" "80"]] [":r" "60"]]], "quamolit.comp.task-toggler/init-instant" ["defn" "init-instant" ["args" "state"] ["let" [["done?" ["first" "args"]]] ["{}" [":numb?" "true"] [":done-value" ["if" "done?" "0" "1000"]] [":done-velocity" "0"]]]], "quamolit.core/render-page" ["defn" "render-page" ["markup" "states-ref" "target"] ["let" [["new-tick" ["get-tick"]] ["elapsed" ["-" "new-tick" "@tick-ref"]] ["tree" ["expand-app" "markup" "@tree-ref" "@states-ref" ["mutate-factory" "states-ref"] "new-tick" "elapsed"]]] ["--" ".info" "js/console" "|rendering page..." "@states-ref"] ["reset!" "tree-ref" "tree"] ["reset!" "tick-ref" "new-tick"] ["call-paint" "tree" "target"] ["--" ".log" "js/console" "|tree" "tree"]]], "quamolit.alias/default-on-unmount" ["defn" "default-on-unmount" ["instant" "tick"] ["assoc" "instant" ":numb?" "true"]], "quamolit.comp.task/on-unmount" ["defn" "on-unmount" ["instant" "tick"] ["--" ".log" "js/console" "|calling unmount" "instant"] ["assoc" "instant" ":presence-velocity" "-3" ":left-velocity" "-0.09"]], "quamolit.util.iterate/tween" ["defn" "tween" ["range-data" "range-bound" "x"] ["let" [[["[]" "a" "b"] "range-data"] [["[]" "c" "d"] "range-bound"]] ["+" "a" ["/" ["*" ["-" "b" "a"] ["-" "x" "c"]] ["-" "d" "c"]]]]], "quamolit.comp.folder/render" ["defn" "render" ["cards" "position" "navigate" "index" "popup?"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" "state"] ["let" [["shift-x" ["first" "position"]] ["shift-y" ["last" "position"]] ["popup-ratio" ["/" [":popup" "instant"] "1000"]] ["place-x" ["*" "shift-x" ["-" "1" "popup-ratio"]]] ["place-y" ["*" "shift-y" ["-" "1" "popup-ratio"]]] ["ratio" ["+" "0.2" ["*" "0.8" "popup-ratio"]]] ["bg-light" ["tween" ["[]" "60" "82"] ["[]" "0" "1"] "popup-ratio"]]] ["translate" ["{}" ":style" ["{}" ":x" "place-x" ":y" "place-y"]] ["scale" ["{}" ":style" ["{}" ":ratio" "ratio"]] ["alpha" ["{}" ":style" ["{}" ":opacity" ["*" "0.6" ["/" [":presence" "instant"] "1000"]]]] ["rect" ["{}" ":style" ["{}" ":w" "600" ":h" "400" ":fill-style" ["hsl" "0" "80" "bg-light"]] ":event" ["{}" ":click" ["handle-back" "navigate" "index"]]]]] ["group" ["{}"] ["->>" "cards" ["map-indexed" ["fn" ["index" "card-name"] ["[]" "index" ["let" [["jx" ["mod" "index" "4"]] ["jy" ["js/Math.floor" ["/" "index" "4"]]] ["card-x" ["*" ["-" "jx" "1.5"] ["*" "200" ["+" "0.1" ["*" "0.9" "popup-ratio"]]]]] ["card-y" ["*" ["-" "jy" "1.5"] ["*" "100" ["+" "0.1" ["*" "0.9" "popup-ratio"]]]]]] ["comp-file-card" "card-name" ["[]" "card-x" "card-y"] "mutate!" "index" "ratio" ["=" "state" "index"]]]]]] ["filter" ["fn" ["entry"] ["let" [["index" ["first" "entry"]]] ["if" ["some?" "state"] ["=" "index" "state"] "true"]]]]]] ["if" ["not" "popup?"] ["rect" ["{}" ":style" ["{}" ":w" "600" ":h" "400" ":fill-style" ["hsl" "0" "80" "0" "0"]] ":event" ["{}" ":click" ["handle-back" "navigate" "index"]]]]]]]]]], "quamolit.comp.icons-table/render" ["defn" "render" ["timestamp"] ["fn" ["state" "mutate!" "instant" "tick"] ["group" ["{}"] ["translate" ["{}" ":style" ["{}" ":x" "-200"]] ["comp-icon-increase"]] ["translate" ["{}" ":style" ["{}" ":x" "0"]] ["comp-icon-play"]]]]], "quamolit.render.element/update-textbox" ["defn" "update-textbox" ["state" "keycode" "shift?"] ["--" ".log" "js/console" "keycode"] ["let" [["guess" ["keycode->key" "keycode" "shift?"]]] ["if" ["some?" "guess"] ["str" "state" "guess"] ["case" "keycode" ["8" ["if" ["=" "state" "|"] "|" ["subs" "state" "0" ["-" ["count" "state"] "1"]]]] "state"]]]], "quamolit.comp.ring/cos" ["defn" "cos" ["x"] ["js/Math.cos" ["*" "js/Math.PI" ["/" "x" "180"]]]], "quamolit.comp.task/render" ["defn" "render" ["timestamp" "task" "index" "shift-x"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" ["{}" ":style" ["{}" ":x" ["+" "shift-x" [":left" "instant"]] ":y" ["-" ["*" "60" [":index" "instant"]] "140"]]] ["alpha" ["{}" ":style" ["{}" ":opacity" ["/" [":presence" "instant"] "1000"]]] ["translate" ["{}" ":style" ["{}" ":x" "-200"]] ["comp-toggler" [":done?" "task"] [":id" "task"]]] ["input" ["{}" ":style" ["style-input" [":text" "task"]] ":event" ["{}" ":click" ["handle-input" [":id" "task"] [":text" "task"]]]]] ["translate" ["{}" ":style" ["{}" ":x" "280"]] ["rect" ["{}" ":style" "style-remove" ":event" ["{}" ":click" ["handle-remove" [":id" "task"]]]]]] ["comp-debug" "task" ["{}"]]]]]], "quamolit.comp.finder/init-state" ["defn" "init-state" [] ["[]" "card-collection" "nil"]], "quamolit.comp.folding-fan/handle-toggle" ["defn" "handle-toggle" ["mutate!"] ["fn" ["e" "dispatch"] ["mutate!"]]], "quamolit.comp.task/style-remove" ["def" "style-remove" ["{}" [":w" "40"] [":h" "40"] [":fill-style" ["hsl" "0" "80" "40"]]]], "quamolit.util.time/get-tick" ["defn" "get-tick" [] [".valueOf" ["js/Date."]]], "quamolit.comp.folding-fan/init-state" ["defn" "init-state" [] "true"], "quamolit.comp.todolist/init-instant" ["defn" "init-instant" ["args" "state" "at-place?"] ["{}" ":presence" "0" ":presence-v" "3" ":numb?" "false"]], "quamolit.comp.portal/comp-portal" ["def" "comp-portal" ["create-comp" ":portal" "render"]], "quamolit.comp.folding-fan/on-unmount" ["defn" "on-unmount" ["instant" "tick"] "instant"], "quamolit.core/handle-event" ["defn" "handle-event" ["coord" "event-name" "event" "dispatch"] ["let" [["maybe-listener" ["resolve-target" "@tree-ref" "event-name" "coord"]]] ["--" ".log" "js.console" "|handle event" "maybe-listener" "coord" "event-name" "@tree-ref"] ["if" ["some?" "maybe-listener"] ["do" [".preventDefault" "event"] ["maybe-listener" "event" "dispatch"]] ["--" ".log" "js/console" "|no target"]]]], "quamolit.comp.icon-increase/on-unmount" ["defn" "on-unmount" ["instant" "tick"] "instant"], "quamolit.updater.core/updater-fn" ["defn" "updater-fn" ["store" "op" "op-data" "tick"] ["--" ".log" "js/console" "|store update:" "op" "op-data" "tick"] ["case" "op" [":add" ["task-add" "store" "op-data" "tick"]] [":rm" ["task-rm" "store" "op-data" "tick"]] [":update" ["task-update" "store" "op-data" "tick"]] [":toggle" ["task-toggle" "store" "op-data" "tick"]] "store"]], "quamolit.render.paint/paint-restore" ["defn" "paint-restore" ["ctx" "style" "eff-ref"] [".restore" "ctx"] ["swap!" "eff-ref" "update" ":alpha-stack" "rest"]], "quamolit.comp.clock/comp-clock" ["def" "comp-clock" ["create-comp" ":clock" "render"]], "quamolit.comp.icon-increase/remove?" ["defn" "remove?" ["instant"] "true"], "quamolit.comp.finder/render" ["defn" "render" ["timestamp"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" "instant" "state"] ["rect" ["{}" ":style" ["{}" ":w" "1000" ":h" "600" ":fill-style" ["hsl" "100" "40" "90"]] ":event" ["{}" ":click" ["handle-back" "mutate!"]]] ["group" ["{}"] ["->>" ["first" "state"] ["map-indexed" ["fn" ["index" "folder"] ["--" ".log" "js/console" "folder"] ["let" [["ix" ["mod" "index" "4"]] ["iy" ["js/Math.floor" ["/" "index" "4"]]] ["position" ["[]" ["-" ["*" "ix" "200"] "200"] ["-" ["*" "iy" "200"] "100"]]]] ["[]" "index" ["comp-folder" "folder" "position" "mutate!" "index" ["=" "index" ["last" "state"]]]]]]] ["filter" ["fn" ["entry"] ["let" [[["[]" "index" "tree"] "entry"] ["target" ["last" "state"]]] ["if" ["some?" "target"] ["=" "index" "target"] "true"]]]]]]]]], "quamolit.comp.icon-play/render" ["defn" "render" [] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["tw" ["fn" ["a0" "a1"] ["tween" ["[]" "a0" "a1"] ["[]" "0" "1"] [":play-value" "instant"]]]]] ["rect" ["{}" ":style" ["{}" [":w" "60"] [":h" "60"] [":fill-style" ["hsl" "40" "80" "90"]]] ":event" ["{}" ":click" ["handle-click" "mutate!"]]] ["path" ["{}" ":style" ["{}" [":points" ["[]" ["[]" "-20" "-20"] ["[]" "-20" "20"] ["[]" ["tw" "-5" "0"] ["tw" "20" "10"]] ["[]" ["tw" "-5" "0"] ["tw" "-20" "-10"]]]] [":fill-style" ["hsl" "120" "50" "60"]]]]] ["path" ["{}" ":style" ["{}" [":points" ["[]" ["[]" ["tw" "5" "0"] ["tw" "-20" "-10"]] ["[]" "20" ["tw" "-20" "0"]] ["[]" "20" ["tw" "20" "0"]] ["[]" ["tw" "5" "0"] ["tw" "20" "10"]]]] [":fill-style" ["hsl" "120" "50" "60"]]]]] ["--" "comp-debug" "instant" ["{}"]]]]]], "quamolit.comp.folder/init-instant" ["defn" "init-instant" ["args" "state" "at-place?"] ["{}" ":presence" "0" ":presence-v" "3" ":popup" "0" ":popup-v" "0"]], "quamolit.comp.task-toggler/handle-click" ["defn" "handle-click" ["task-id"] ["fn" ["event" "dispatch"] ["dispatch" ":toggle" "task-id"]]], "quamolit.comp.task-toggler/comp-toggler" ["def" "comp-toggler" ["create-comp" ":task-toggler" "nil" "nil" "init-instant" "on-tick" "on-update" "nil" "nil" "render"]], "quamolit.comp.solar/style-small" ["def" "style-small" ["{}" [":fill-style" ["hsl" "200" "80" "80"]] [":r" "30"]]], "quamolit.comp.digits/comp-digit" ["def" "comp-digit" ["create-comp" ":digit" "render-digit"]], "quamolit.alias/default-remove?" ["defn" "default-remove?" ["instant"] [":numb?" "instant"]], "quamolit.comp.folding-fan/render" ["defn" "render" [] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["n" "24"] ["image-w" "650"] ["image-h" "432"] ["image-unit" ["/" "image-w" "n"]] ["dest-w" "650"] ["dest-h" "432"] ["dest-unit" ["/" "dest-w" "n"]]] ["group" ["{}"] ["translate" ["{}" [":style" ["{}" ":x" "0" ":y" "160"]]] ["->>" ["range" "n"] ["map" ["fn" ["i"] ["[]" "i" ["rotate" ["{}" [":style" ["{}" ":angle" ["*" ["tween" ["[]" "0" "6"] ["[]" "0" "1000"] [":folding-value" "instant"]] ["+" "0.5" ["-" "i" ["/" "n" "2"]]]]]]] ["image" ["{}" [":style" ["{}" [":src" "|lotus.jpg"] [":sx" ["*" "i" "image-unit"]] [":sy" "0"] [":sw" "image-unit"] [":sh" "image-h"] [":dx" ["-" "0" ["/" "image-unit" "2"]]] [":dy" ["-" "10" "dest-h"]] [":dw" "dest-unit"] [":dh" "dest-h"]]]]]]]]]]] ["button" ["{}" [":style" ["{}" [":text" "|Toggle"] [":x" "160"] [":y" "200"] [":surface-color" ["hsl" "30" "80" "60"]] [":text-color" ["hsl" "0" "0" "100"]]]] [":event" ["{}" [":click" ["handle-toggle" "mutate!"]]]]]]]]]], "quamolit.comp.raining/remove?" ["defn" "remove?" ["instant"] "true"], "quamolit.render.paint/paint-text" ["defn" "paint-text" ["ctx" "style"] ["set!" "ctx.fillStyle" ["or" [":fill-style" "style"] ["hsl" "0" "0" "0"]]] ["set!" "ctx.textAlign" ["or" [":text-align" "style"] "|center"]] ["set!" "ctx.textBaseline" ["or" [":base-line" "style"] "|middle"]] ["set!" "ctx.font" ["str" ["or" [":size" "style"] "20"] "|px " ["or" [":font-family" "style"] "|Optima"]]] ["if" ["contains?" "style" ":fill-style"] ["do" [".fillText" "ctx" [":text" "style"] ["or" [":x" "style"] "0"] ["or" [":y" "style"] "0"] ["or" [":max-width" "style"] "400"]]]] ["if" ["contains?" "style" ":stroke-style"] ["do" [".strokeText" "ctx" [":text" "style"] ["or" [":x" "style"] "0"] ["or" [":y" "style"] "0"] ["or" [":max-width" "style"] "400"]]]]], "quamolit.core/call-paint" ["defn" "call-paint" ["tree" "target"] ["--" ".log" "js/console" "tree" "@directives-ref"] ["if" ["not=" "tree" "@directives-ref"] ["do" ["let" [["ctx" [".getContext" "target" "|2d"]] ["eff-ref" ["atom" ["{}" ":alpha-stack" ["list" "1"]]]] ["w" "js/window.innerWidth"] ["h" "js/window.innerHeight"]] [".clearRect" "ctx" "0" "0" "w" "h"] [".save" "ctx"] [".translate" "ctx" ["/" "w" "2"] ["/" "h" "2"]] ["paint" "ctx" "tree" "eff-ref"] [".restore" "ctx"]] ["reset!" "directives-ref" "tree"]]]], "quamolit.util.keyboard/keycode->key" ["defn" "keycode->key" ["k" "shift?"] ["if" ["and" ["<=" "k" "90"] [">=" "k" "65"]] ["if" "shift?" ["js/String.fromCharCode" "k"] ["->" "k" "js/String.fromCharCode" "string/lower-case"]] "nil"]], "quamolit.render.element/render-input" ["defn" "render-input" ["props"] ["let" [["style" [":style" "props"]] ["event-collection" [":event" "props"]] ["w" [":w" "style"]] ["h" [":h" "style"]] ["style-bg" ["{}" [":fill-style" ["hsl" "0" "50" "80"]] [":stroke-style" ["hsl" "0" "0" "50"]] [":line-width" "2"] [":x" ["or" [":x" "style"] "0"]] [":y" ["or" [":y" "style"] "0"]] [":w" "w"] [":h" "h"]]] ["style-place-text" ["{}"]] ["style-text" ["{}" [":text-align" "|center"] [":text" [":text" "style"]] [":font-family" "|Optima"] [":size" "20"] [":fill-style" ["hsl" "0" "0" "0"]] [":x" "0"] [":y" "0"] [":max-width" "w"]]]] ["fn" ["state" "mutate!" "instant" "tick"] ["group" ["{}"] ["rect" ["{}" ":style" "style-bg" ":event" "event-collection"]] ["translate" ["{}" ":style" "style-place-text"] ["text" ["{}" ":style" "style-text"]]]]]]], "quamolit.comp.fade-in-out/init-instant" ["defn" "init-instant" ["args" "state"] ["{}" [":presence" "0"] [":presence-v" "3"] [":numb?" "false"]]], "quamolit.comp.raining/on-unmount" ["defn" "on-unmount" ["instant" "tick"] "instant"], "quamolit.comp.icon-increase/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["let" [["target" [":n-target" "instant"]] ["new-instant" ["->" "instant" ["iterate-instant" ":n" ":n-v" "elapsed" ["[]" "target" "target"]]]]] "new-instant"]], "quamolit.render.paint/paint-line" ["defn" "paint-line" ["ctx" "style"] ["let" [["x0" ["or" [":x0" "style"] "0"]] ["y0" ["or" [":y0" "style"] "0"]] ["x1" ["or" [":x1" "style"] "40"]] ["y1" ["or" [":y1" "style"] "40"]] ["line-width" ["or" [":line-width" "style"] "4"]] ["stroke-style" ["or" [":stroke-style" "style"] ["hsl" "200" "70" "50"]]] ["line-cap" ["or" [":line-cap" "style"] "|round"]] ["line-join" ["or" [":line-join" "style"] "|round"]] ["miter-limit" ["or" [":miter-limit" "style"] "8"]]] [".beginPath" "ctx"] [".moveTo" "ctx" "x0" "y0"] [".lineTo" "ctx" "x1" "y1"] ["set!" "ctx.lineWidth" "line-width"] ["set!" "ctx.strokeStyle" "stroke-style"] ["set!" "ctx.lineCap" "line-cap"] ["set!" "ctx.miterLimit" "miter-limit"] [".stroke" "ctx"]]], "quamolit.alias/path" ["defn" "path" ["props" "&" "children"] ["create-shape" ":path" "props" "children"]], "quamolit.comp.folding-fan/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["iterate-instant" "instant" ":folding-value" ":folding-v" "elapsed" ["[]" "0" "1000"]]], "quamolit.comp.digits/comp-8" ["def" "comp-8" ["create-comp" ":eight" "render-8"]], "quamolit.comp.icon-play/remove?" ["defn" "remove?" ["instant"] "true"], "quamolit.comp.raining/get-tick" ["defn" "get-tick" [] [".valueOf" ["js/Date."]]], "quamolit.alias/line" ["defn" "line" ["props" "&" "children"] ["create-shape" ":line" "props" "children"]], "quamolit.comp.debug/render" ["defn" "render" ["data" "more-style"] ["fn" ["state" "mutate!" "instant" "tick"] ["let" [["style" ["->" "default-style" ["merge" "more-style"] ["assoc" ":text" ["pr-str" "data"]]]]] ["text" ["{}" ":style" "style"]]]]], "quamolit.comp.folder/comp-folder" ["def" "comp-folder" ["create-comp" ":folder" "init-state" "update-state" "init-instant" "on-tick" "on-update" "on-unmount" "nil" "render"]], "quamolit.alias/image" ["defn" "image" ["props" "&" "children"] ["create-shape" ":image" "props" "children"]], "quamolit.comp.task/handle-input" ["defn" "handle-input" ["task-id" "task-text"] ["fn" ["event" "dispatch"] ["let" [["new-text" ["js/prompt" "|new content:" "task-text"]]] ["dispatch" ":update" ["[]" "task-id" "new-text"]]]]], "quamolit.render.paint/get-image" ["defn" "get-image" ["src"] ["if" ["contains?" "image-pool" "src"] ["get" "image-pool" "src"] ["let" [["image" [".createElement" "js/document" "|img"]]] [".setAttribute" "image" "|src" "src"] "image"]]], "quamolit.alias/default-on-update" ["defn" "default-on-update" ["instant" "old-args" "args" "old-state" "state"] "instant"], "quamolit.comp.digits/comp-9" ["def" "comp-9" ["create-comp" ":nine" "render-9"]], "quamolit.render.element/textbox" ["def" "textbox" ["create-comp" ":textbox" "init-textbox" "update-textbox" "render-textbox"]], "quamolit.comp.task/comp-task" ["def" "comp-task" ["create-comp" ":task" "nil" "nil" "init-instant" "on-tick" "on-update" "on-unmount" "nil" "render"]], "quamolit.render.element/init-textbox" ["defn" "init-textbox" ["props"] [":text" [":style" "props"]]], "quamolit.comp.code-table/comp-code-table" ["def" "comp-code-table" ["create-comp" ":code-table" "init-state" "nil" "render"]], "quamolit.comp.digits/render-9" ["defn" "render-9" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "40" "40" "0" "40"] ["comp-stroke" "0" "40" "0" "0"] ["comp-stroke" "0" "0" "40" "0"] ["comp-stroke" "40" "0" "40" "40"] ["comp-stroke" "40" "40" "40" "80"] ["comp-stroke" "40" "80" "0" "80"]]]], "quamolit.comp.debug/default-style" ["def" "default-style" ["{}" [":x" "0"] [":y" "0"] [":fill-style" ["hsl" "0" "0" "0" "0.5"]] [":font-family" "|Menlo"] [":size" "12"] [":max-width" "600"]]], "quamolit.util.iterate/iterate-instant" ["defn" "iterate-instant" ["instant" "data-key" "velocity-key" "tick" "bound"] ["let" [["current-data" ["get" "instant" "data-key"]] ["velocity" ["get" "instant" "velocity-key"]] ["next-data" ["+" "current-data" ["*" "tick" "velocity"]]] ["lower-bound" ["first" "bound"]] ["upper-bound" ["last" "bound"]]] ["case" ["compare" "velocity" "0"] ["-1" ["if" ["<" "next-data" "lower-bound"] ["assoc" "instant" "data-key" "lower-bound" "velocity-key" "0"] ["assoc" "instant" "data-key" "next-data"]]] ["1" ["if" [">" "next-data" "upper-bound"] ["assoc" "instant" "data-key" "upper-bound" "velocity-key" "0"] ["assoc" "instant" "data-key" "next-data"]]] "instant"]]], "quamolit.comp.file-card/comp-file-card" ["def" "comp-file-card" ["create-comp" ":file-card" "init-instant" "on-tick" "on-update" "on-unmount" "nil" "render"]], "quamolit.comp.file-card/init-instant" ["defn" "init-instant" [] ["{}" ":numb?" "false" ":popup" "0" ":popup-v" "0" ":presence" "0" ":presence-v" "3"]], "quamolit.comp.raindrop/remove?" ["defn" "remove?" ["instant"] ["and" ["=" "0" [":presence" "instant"]] ["=" "0" [":presence-v" "instant"]]]], "quamolit.comp.portal/style-button" ["defn" "style-button" ["x" "y" "page-name" "bg-color"] ["{}" [":w" "180"] [":h" "60"] [":x" ["-" ["*" "x" "240"] "400"]] [":y" ["-" ["*" "y" "100"] "200"]] [":surface-color" "bg-color"] [":text" "page-name"] [":text-color" ["hsl" "0" "0" "100"]]]], "quamolit.comp.icon-increase/comp-icon-increase" ["def" "comp-icon-increase" ["create-comp" ":icon-increase" "init-state" "update-state" "init-instant" "on-tick" "on-update" "on-unmount" "remove?" "render"]], "quamolit.util.list/filter-first" ["defn" "filter-first" ["f" "xs"] ["reduce" ["fn" ["acc" "x"] ["when" ["f" "x"] ["reduced" "x"]]] "nil" "xs"]], "quamolit.main/loop-ref" ["defonce" "loop-ref" ["atom" "nil"]], "quamolit.core/configure-canvas" ["defn" "configure-canvas" ["app-container"] [".setAttribute" "app-container" "|width" "js/window.innerWidth"] [".setAttribute" "app-container" "|height" "js/window.innerHeight"] ["aset" [".-style" "app-container"] "|width" "js/window.innerWidth"] ["aset" [".-style" "app-container"] "|height" "js/window.innerHeight"] ["reset!" "directives-ref" "nil"]], "quamolit.main/states-ref" ["defonce" "states-ref" ["atom" ["{}"]]], "quamolit.comp.raining/comp-raining" ["def" "comp-raining" ["create-comp" ":raining" "init-instant" "on-tick" "on-update" "on-unmount" "remove?" "render"]], "quamolit.comp.icon-play/handle-click" ["defn" "handle-click" ["mutate!"] ["fn" ["event" "dispatch"] ["mutate!"]]], "quamolit.alias/group" ["defn" "group" ["props" "&" "children"] ["create-shape" ":group" "props" "children"]], "quamolit.render.element/alpha" ["def" "alpha" ["create-comp" ":alpha" "render-alpha"]], "quamolit.render.element/scale" ["def" "scale" ["create-comp" ":scale" "render-scale"]], "quamolit.comp.ring/sin" ["defn" "sin" ["x"] ["js/Math.sin" ["*" "js/Math.PI" ["/" "x" "180"]]]], "quamolit.comp.icon-play/comp-icon-play" ["def" "comp-icon-play" ["create-comp" ":icon-play" "init-state" "update-state" "init-instant" "on-tick" "on-update" "on-unmount" "remove?" "render"]], "quamolit.util.order/by-coord" ["defn" "by-coord" ["a" "b"] ["--" ".log" "js/console" "|comparing" "a" "b"] ["cond" [["=" ["count" "a"] ["count" "b"] "0"] "0"] [["and" ["=" ["count" "a"] "0"] [">" ["count" "b"] "0"]] "-1"] [["and" [">" ["count" "a"] "0"] ["=" ["count" "b"] "0"]] "1"] [":else" ["case" ["compare" ["first" "a"] ["first" "b"]] ["-1" "-1"] ["1" "1"] ["recur" ["rest" "a"] ["rest" "b"]]]]]], "quamolit.util.detect/=vector" ["defn" "=vector" ["xs" "ys"] ["if" ["=" ["count" "xs"] ["count" "ys"]] ["if" [">" ["count" "xs"] "0"] ["let" [["x0" ["get" "xs" "0"]] ["y0" ["get" "ys" "0"]]] ["if" ["identical?" "x0" "y0"] ["recur" ["subvec" "xs" "1"] ["subvec" "ys" "1"]] "false"]] "true"] "false"]], "quamolit.comp.task-toggler/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] ["let" [["old-done?" ["first" "old-args"]] ["done?" ["first" "args"]]] ["if" ["not=" "old-done?" "done?"] ["assoc" "instant" ":done-velocity" ["if" [">" [":done-value" "instant"] "500"] "-3" "3"]] "instant"]]], "quamolit.comp.todolist/handle-click" ["defn" "handle-click" ["simple-event" "dispatch" "set-state"] [".log" "js/console" "simple-event"]], "quamolit.comp.digits/render-4" ["defn" "render-4" ["props"] ["fn" ["state" "mutate!" "instant" "tick"] ["translate" "props" ["comp-stroke" "0" "0" "0" "40"] ["comp-stroke" "0" "40" "40" "40"] ["comp-stroke" "40" "40" "40" "80"] ["comp-stroke" "40" "40" "40" "0"]]]], "quamolit.core/mutate-factory" ["defn" "mutate-factory" ["states-ref"] ["fn" ["coord"] ["--" ".log" "js/console" "|build new mutate" "coord"] ["fn" ["&" "state-args"] ["--" ".log" "js/console" "|coord:" "coord"] ["--" ".log" "js/console" "|states-ref" "@states-ref"] ["--" ".log" "js/console" "|old-state" ["get" "@states-ref" "coord"]] ["let" [["component" ["locate-target" "@tree-ref" ["subvec" "coord" "0" ["-" ["count" "coord"] "1"]]]] ["state-path" ["conj" "coord" ["quote" "data"]]] ["maybe-state" ["get-in" "@states-ref" "state-path"]] ["old-state" ["if" ["some?" "maybe-state"] "maybe-state" ["let" [["init-state" [":init-state" "component"]] ["args" [":args" "component"]]] ["apply" "init-state" "args"]]]] ["update-state" [":update-state" "component"]] ["new-state" ["apply" "update-state" ["cons" "old-state" "state-args"]]] ["new-states" ["assoc-in" "@states-ref" "state-path" "new-state"]]] ["--" ".log" "js/console" "|component" "component"] ["--" ".log" "js/console" "|new-states" "new-states"] ["reset!" "states-ref" "new-states"]]]]], "quamolit.comp.container/comp-container" ["def" "comp-container" ["create-comp" ":container" "init-state" "update-state" "render"]], "quamolit.alias/arc" ["defn" "arc" ["props" "&" "children"] ["create-shape" ":arc" "props" "children"]], "quamolit.main/store-ref" ["defonce" "store-ref" ["atom" ["[]"]]], "quamolit.comp.container/init-state" ["defn" "init-state" [] ":portal"], "quamolit.comp.folder/on-update" ["defn" "on-update" ["instant" "old-args" "args" "old-state" "state"] ["--" ".log" "js/console" "|update folder..." "args"] ["let" [["old-popup?" ["last" "old-args"]] ["popup?" ["last" "args"]]] ["if" ["not=" "old-popup?" "popup?"] ["assoc" "instant" ":popup-v" ["if" "popup?" "3" "-3"]] "instant"]]], "quamolit.alias/native-save" ["defn" "native-save" ["props" "&" "children"] ["create-shape" ":native-save" "props" "children"]], "quamolit.alias/create-shape" ["defn" "create-shape" ["shape-name" "props" "children"] ["if" ["not" ["map?" "props"]] ["throw" ["js/Error." "|Props expeced to be a map!"]]] ["Shape." "shape-name" [":style" "props"] [":event" "props"] ["arrange-children" "children"]]], "quamolit.comp.raindrop/on-unmount" ["defn" "on-unmount" ["instant" "tick"] ["assoc" "instant" ":presence-v" "-3"]], "quamolit.comp.fade-in-out/render" ["defn" "render" ["props" "&" "children"] ["fn" ["state" "mutate!" "instant" "tick"] ["--" ".log" "js/console" "instant"] ["alpha" ["{}" ":style" ["{}" ":opacity" ["/" [":presence" "instant"] "1000"]]] ["map-indexed" "vector" "children"]]]], "quamolit.comp.todolist/position-body" ["def" "position-body" ["{}" [":x" "0"] [":y" "40"]]], "quamolit.comp.todolist/style-button" ["def" "style-button" ["{}" [":w" "80"] [":h" "40"] [":text" "|add"]]], "quamolit.comp.folding-fan/update-state" ["defn" "update-state" ["state"] ["not" "state"]], "quamolit.render.paint/paint-path" ["defn" "paint-path" ["ctx" "style"] ["let" [["points" [":points" "style"]] ["first-point" ["first" "points"]]] [".beginPath" "ctx"] [".moveTo" "ctx" ["first" "first-point"] ["last" "first-point"]] ["doseq" ["[]" "coords" ["rest" "points"]] ["case" ["count" "coords"] ["2" [".lineTo" "ctx" ["get" "coords" "0"] ["get" "coords" "1"]]] ["4" [".quadraticCurveTo" "ctx" ["get" "coords" "0"] ["get" "coords" "1"] ["get" "coords" "2"] ["get" "coords" "3"]]] ["6" [".bezierCurveTo" "ctx" ["get" "coords" "0"] ["get" "coords" "1"] ["get" "coords" "2"] ["get" "coords" "3"] ["get" "coords" "4"] ["get" "coords" "5"]]] [":else" ["throw" "|not supported coords"]]]] ["if" ["contains?" "style" ":stroke-style"] ["do" ["set!" "ctx.lineWidth" ["or" [":line-width" "style"] "4"]] ["set!" "ctx.strokeStyle" [":stroke-style" "style"]] ["set!" "ctx.lineCap" ["or" [":line-cap" "style"] "|round"]] ["set!" "ctx.lineJoin" ["or" [":line-join" "style"] "|round"]] ["set!" "ctx.milterLimit" ["or" [":milter-limit" "style"] "8"]] [".stroke" "ctx"]]] ["if" ["contains?" "style" ":fill-style"] ["do" ["set!" "ctx.fillStyle" [":fill-style" "style"]] [".closePath" "ctx"] [".fill" "ctx"]]]]], "quamolit.alias/rect" ["defn" "rect" ["props" "&" "children"] ["create-shape" ":rect" "props" "children"]], "quamolit.comp.todolist/on-tick" ["defn" "on-tick" ["instant" "tick" "elapsed"] ["let" [["new-instant" ["iterate-instant" "instant" ":presence" ":presence-v" "elapsed" ["[]" "0" "1000"]]]] ["if" ["and" ["<" [":presence-v" "instant"] "0"] ["=" [":presence" "new-instant"] "0"]] ["assoc" "new-instant" ":numb?" "true"] "new-instant"]]], "quamolit.comp.file-card/handle-click" ["defn" "handle-click" ["navigate-this" "index" "popup?"] ["fn" ["event" "dispatch"] ["navigate-this" ["if" "popup?" "nil" "index"]]]], "quamolit.render.expand/expand-component" ["defn" "expand-component" ["markup" "old-tree" "coord" "states" "build-mutate" "at-place?" "tick" "elapsed"] ["let" [["child-coord" ["conj" "coord" [":name" "markup"]]] ["existed?" ["some?" "old-tree"]] ["state-tree" ["get" "states" [":name" "markup"]]]] ["--" ".log" "js/console" "|child-coord:" "child-coord"] ["--" ".log" "js/console" "|component" [":name" "markup"] "coord"] ["--" ".log" "js/console" "states"] ["if" "existed?" ["let" [["old-args" [":args" "old-tree"]] ["old-states" [":states" "old-tree"]] ["old-instant" [":instant" "old-tree"]] ["new-args" [":args" "markup"]] ["old-state" ["get" "old-states" ["quote" "data"]]] ["init-state" [":init-state" "markup"]] ["new-state" ["if" ["contains?" "state-tree" ["quote" "data"]] ["get" "state-tree" ["quote" "data"]] ["apply" "init-state" "new-args"]]] ["on-tick" [":on-tick" "markup"]] ["on-update" [":on-update" "markup"]] ["new-instant" ["->" "old-instant" ["on-tick" "tick" "elapsed"] ["on-update" ["into" ["[]"] "old-args"] ["into" ["[]"] "new-args"] "old-state" "new-state"]]]] ["if" ["and" ["identical?" "old-states" "state-tree"] ["identical?" [":render" "old-tree"] [":render" "markup"]] ["identical?" "old-instant" "new-instant"] ["=vector" ["into" ["[]"] "old-args"] ["into" ["[]"] "new-args"]]] ["do" ["--" "println" "|reusing tree" "child-coord"] ["--" "println" "old-args" "new-args"] ["--" "println" "coord" "old-states" "state-tree"] "old-tree"] ["let" [["mutate!" ["build-mutate" "child-coord"]] ["new-shape" ["->" [":render" "markup"] ["apply" "new-args"] ["apply" ["list" "new-state" "mutate!" "new-instant" "tick"]]]] ["new-tree" ["if" ["=" "Component" ["type" "new-shape"]] ["expand-component" "new-shape" [":tree" "old-tree"] "child-coord" "state-tree" "build-mutate" "at-place?" "tick" "elapsed"] ["expand-shape" "new-shape" [":tree" "old-tree"] "child-coord" "child-coord" "state-tree" "build-mutate" "at-place?" "tick" "elapsed"]]]] ["--" ".log" "js/console" "|existing state" "coord" "state-tree"] ["merge" "old-tree" ["{}" [":args" "new-args"] [":states" "state-tree"] [":instant" "new-instant"] [":tree" "new-tree"]]]]]] ["let" [["args" [":args" "markup"]] ["init-state" [":init-state" "markup"]] ["init-instant" [":init-instant" "markup"]] ["state" ["if" ["contains?" "state-tree" ["quote" "data"]] ["get" "state-tree" ["quote" "data"]] ["apply" "init-state" "args"]]] ["instant" ["init-instant" ["into" ["[]"] "args"] "state" "at-place?"]] ["mutate!" ["build-mutate" "child-coord"]] ["shape" ["->" [":render" "markup"] ["apply" "args"] ["apply" ["list" "state" "mutate!" "instant" "tick"]]]] ["tree" ["if" ["=" "Component" ["type" "shape"]] ["expand-component" "shape" "nil" "child-coord" "state-tree" "build-mutate" "false" "tick" "elapsed"] ["expand-shape" "shape" "nil" "child-coord" "child-coord" "state-tree" "build-mutate" "false" "tick" "elapsed"]]]] ["merge" "markup" ["{}" [":coord" "child-coord"] [":args" "args"] [":states" "state-tree"] [":instant" "instant"] [":tree" "tree"]]]]]]]}, :namespaces {"quamolit.comp.fade-in-out" ["ns" "quamolit.comp.fade-in-out" [":require" ["[]" "quamolit.alias" ":refer" ["[]" "create-comp"]] ["[]" "quamolit.render.element" ":refer" ["[]" "alpha"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant"]]]], "quamolit.comp.portal" ["ns" "quamolit.comp.portal" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group" "rect" "text"]] ["[]" "quamolit.render.element" ":refer" ["[]" "alpha" "translate" "button"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant" "tween"]]]], "quamolit.comp.code-table" ["ns" "quamolit.comp.code-table" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group" "rect"]] ["[]" "quamolit.render.element" ":refer" ["[]" "input" "translate" "textbox"]] ["[]" "quamolit.util.keyboard" ":refer" ["[]" "keycode->key"]]]], "quamolit.util.iterate" ["ns" "quamolit.util.iterate"], "quamolit.comp.icon-play" ["ns" "quamolit.comp.icon-play" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "path" "group" "rect"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant" "tween"]] ["[]" "quamolit.comp.debug" ":refer" ["[]" "comp-debug"]]]], "quamolit.comp.debug" ["ns" "quamolit.comp.debug" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "rect" "text"]] ["[]" "quamolit.render.element" ":refer" ["[]" "alpha" "translate" "button"]]]], "quamolit.comp.icon-increase" ["ns" "quamolit.comp.icon-increase" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "line" "text" "group" "rect"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate" "rotate" "alpha"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant"]]]], "quamolit.render.expand" ["ns" "quamolit.render.expand" [":require" ["[]" "quamolit.types" ":refer" ["[]" "Component" "Shape"]] ["[]" "quamolit.util.detect" ":refer" ["[]" "=vector"]] ["[]" "quamolit.util.list" ":refer" ["[]" "filter-first"]]]], "quamolit.controller.resolve" ["ns" "quamolit.controller.resolve" [":require" ["[]" "quamolit.types" ":refer" ["[]" "Component"]] ["[]" "quamolit.util.list" ":refer" ["[]" "filter-first"]]]], "quamolit.comp.todolist" ["ns" "quamolit.comp.todolist" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group" "rect" "text"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate" "button" "input" "alpha"]] ["[]" "quamolit.comp.task" ":refer" ["[]" "comp-task"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant" "tween"]] ["[]" "quamolit.comp.debug" ":refer" ["[]" "comp-debug"]]]], "quamolit.alias" ["ns" "quamolit.alias" [":require" ["[]" "quamolit.types" ":refer" ["[]" "Component" "Shape"]]]], "quamolit.core" ["ns" "quamolit.core" [":require" ["cljs.reader" ":as" "reader"] ["[]" "quamolit.types" ":refer" ["[]" "Component"]] ["[]" "quamolit.render.expand" ":refer" ["[]" "expand-app"]] ["[]" "quamolit.util.time" ":refer" ["[]" "get-tick"]] ["[]" "quamolit.render.paint" ":refer" ["[]" "paint"]] ["[]" "quamolit.controller.resolve" ":refer" ["[]" "resolve-target" "locate-target"]]]], "quamolit.comp.task" ["ns" "quamolit.comp.task" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group" "rect"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate" "alpha" "input"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant"]] ["[]" "quamolit.comp.task-toggler" ":refer" ["[]" "comp-toggler"]] ["[]" "quamolit.comp.debug" ":refer" ["[]" "comp-debug"]]]], "quamolit.comp.clock" ["ns" "quamolit.comp.clock" [":require" ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate"]] ["[]" "quamolit.comp.digits" ":refer" ["[]" "comp-digit"]] ["[]" "quamolit.comp.debug" ":refer" ["[]" "comp-debug"]]]], "quamolit.comp.folding-fan" ["ns" "quamolit.comp.folding-fan" [":require" ["[]" "quamolit.alias" ":refer" ["[]" "text" "create-comp" "group" "image"]] ["[]" "quamolit.render.element" ":refer" ["[]" "button" "translate" "rotate"]] ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant" "tween"]]]], "quamolit.comp.digits" ["ns" "quamolit.comp.digits" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "rect" "group" "line"]] ["[]" "quamolit.render.element" ":refer" ["[]" "alpha" "translate"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant" "tween"]]]], "quamolit.util.keyboard" ["ns" "quamolit.util.keyboard" [":require" ["[]" "clojure.string" ":as" "string"]]], "quamolit.comp.container" ["ns" "quamolit.comp.container" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate" "button"]] ["[]" "quamolit.comp.todolist" ":refer" ["[]" "comp-todolist"]] ["[]" "quamolit.comp.digits" ":refer" ["[]" "comp-digit"]] ["[]" "quamolit.comp.portal" ":refer" ["[]" "comp-portal"]] ["[]" "quamolit.comp.clock" ":refer" ["[]" "comp-clock"]] ["[]" "quamolit.comp.solar" ":refer" ["[]" "comp-solar"]] ["[]" "quamolit.comp.fade-in-out" ":refer" ["[]" "comp-fade-in-out"]] ["[]" "quamolit.comp.binary-tree" ":refer" ["[]" "comp-binary-tree"]] ["[]" "quamolit.comp.code-table" ":refer" ["[]" "comp-code-table"]] ["[]" "quamolit.comp.finder" ":refer" ["[]" "comp-finder"]] ["[]" "quamolit.comp.raining" ":refer" ["[]" "comp-raining"]] ["[]" "quamolit.comp.icons-table" ":refer" ["[]" "comp-icons-table"]] ["[]" "quamolit.comp.ring" ":refer" ["[]" "comp-ring"]] ["[]" "quamolit.comp.folding-fan" ":refer" ["[]" "comp-folding-fan"]] ["[]" "quamolit.comp.debug" ":refer" ["[]" "comp-debug"]]]], "quamolit.util.list" ["ns" "quamolit.util.list"], "quamolit.util.time" ["ns" "quamolit.util.time"], "quamolit.comp.finder" ["ns" "quamolit.comp.finder" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "rect" "group"]] ["[]" "quamolit.comp.folder" ":refer" ["[]" "comp-folder"]]]], "quamolit.util.detect" ["ns" "quamolit.util.detect"], "quamolit.comp.file-card" ["ns" "quamolit.comp.file-card" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group" "rect" "text"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate" "alpha" "scale"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant"]]]], "quamolit.updater.core" ["ns" "quamolit.updater.core" [":require" ["[]" "quamolit.schema" ":as" "schema"]]], "quamolit.comp.ring" ["ns" "quamolit.comp.ring" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group" "path"]] ["[]" "quamolit.comp.debug" ":refer" ["[]" "comp-debug"]]]], "quamolit.comp.folder" ["ns" "quamolit.comp.folder" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "rect" "text" "group"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate" "scale" "alpha"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant" "tween"]] ["[]" "quamolit.comp.file-card" ":refer" ["[]" "comp-file-card"]]]], "quamolit.comp.raining" ["ns" "quamolit.comp.raining" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "rect" "group"]] ["[]" "quamolit.comp.raindrop" ":refer" ["[]" "comp-raindrop"]]]], "quamolit.util.order" ["ns" "quamolit.util.order"], "quamolit.comp.binary-tree" ["ns" "quamolit.comp.binary-tree" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "line" "group" "path"]] ["[]" "quamolit.render.element" ":refer" ["[]" "rotate" "scale" "translate"]]]], "quamolit.comp.raindrop" ["ns" "quamolit.comp.raindrop" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "rect"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate" "alpha"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant"]]]], "quamolit.main" ["ns" "quamolit.main" [":require" ["[]" "quamolit.comp.container" ":refer" ["[]" "comp-container"]] ["[]" "quamolit.core" ":refer" ["[]" "render-page" "configure-canvas" "setup-events"]] ["[]" "quamolit.util.time" ":refer" ["[]" "get-tick"]] ["[]" "quamolit.updater.core" ":refer" ["[]" "updater-fn"]] ["[]" "devtools.core" ":as" "devtools"]]], "quamolit.comp.icons-table" ["ns" "quamolit.comp.icons-table" [":require" ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "text" "line" "group"]] ["[]" "quamolit.render.element" ":refer" ["[]" "translate"]] ["[]" "quamolit.comp.icon-increase" ":refer" ["[]" "comp-icon-increase"]] ["[]" "quamolit.comp.icon-play" ":refer" ["[]" "comp-icon-play"]]]], "quamolit.render.element" ["ns" "quamolit.render.element" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "native-translate" "native-alpha" "native-save" "native-restore" "native-rotate" "native-scale" "group" "rect" "text" "arrange-children"]] ["[]" "quamolit.util.keyboard" ":refer" ["[]" "keycode->key"]]]], "quamolit.schema" ["ns" "quamolit.schema"], "quamolit.comp.solar" ["ns" "quamolit.comp.solar" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group" "rect" "arc"]] ["[]" "quamolit.render.element" ":refer" ["[]" "rotate" "translate" "scale"]]]], "quamolit.render.paint" ["ns" "quamolit.render.paint" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.types" ":refer" ["[]" "Component"]]]], "quamolit.comp.task-toggler" ["ns" "quamolit.comp.task-toggler" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "quamolit.util.iterate" ":refer" ["[]" "iterate-instant" "tween"]] ["[]" "quamolit.alias" ":refer" ["[]" "create-comp" "group" "rect"]]]]}, :procedures {"quamolit.comp.fade-in-out" [], "quamolit.comp.portal" [], "quamolit.comp.code-table" [], "quamolit.util.iterate" [], "quamolit.comp.icon-play" [], "quamolit.comp.debug" [], "quamolit.render.flatten" [], "quamolit.comp.icon-increase" [], "quamolit.render.expand" [["declare" "expand-component"]], "quamolit.controller.resolve" [], "quamolit.comp.todolist" [], "quamolit.alias" [], "quamolit.core" [], "quamolit.comp.task" [], "quamolit.comp.clock" [], "quamolit.comp.folding-fan" [], "quamolit.comp.digits" [], "quamolit.util.keyboard" [], "quamolit.comp.container" [], "quamolit.util.list" [], "quamolit.util.time" [], "quamolit.comp.finder" [], "quamolit.util.detect" [], "quamolit.comp.file-card" [], "quamolit.updater.core" [], "quamolit.comp.ring" [], "quamolit.comp.folder" [], "quamolit.comp.raining" [], "quamolit.util.order" [], "quamolit.comp.binary-tree" [["declare" "comp-binary-tree"]], "quamolit.comp.raindrop" [], "quamolit.main" [["set!" "js/window.onload" "-main"] ["set!" "js/window.onresize" ["fn" ["event"] ["let" [["target" [".querySelector" "js/document" "|#app"]]] ["configure-canvas" "target"]]]]], "quamolit.comp.icons-table" [], "quamolit.render.element" [], "quamolit.schema" [], "quamolit.comp.solar" [["declare" "comp-solar"]], "quamolit.render.paint" [], "quamolit.comp.task-toggler" []}}